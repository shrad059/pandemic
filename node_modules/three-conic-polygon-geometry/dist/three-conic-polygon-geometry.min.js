// Version 1.4.5 three-conic-polygon-geometry - https://github.com/vasturiano/three-conic-polygon-geometry
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("three")):"function"==typeof define&&define.amd?define(["exports","three"],n):n((t="undefined"!=typeof globalThis?globalThis:t||self).THREE=t.THREE||{},t.THREE)}(this,(function(t,n){"use strict";function e(t){return(e=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function r(t,n){return(r=Object.setPrototypeOf||function(t,n){return t.__proto__=n,t})(t,n)}function i(t,n){if(n&&("object"==typeof n||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function o(t){var n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var r,o=e(t);if(n){var a=e(this).constructor;r=Reflect.construct(o,arguments,a)}else r=o.apply(this,arguments);return i(this,r)}}function a(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,n){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==e)return;var r,i,o=[],a=!0,f=!1;try{for(e=e.call(t);!(a=(r=e.next()).done)&&(o.push(r.value),!n||o.length!==n);a=!0);}catch(t){f=!0,i=t}finally{try{a||null==e.return||e.return()}finally{if(f)throw i}}return o}(t,n)||u(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t){return function(t){if(Array.isArray(t))return s(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||u(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(t,n){if(t){if("string"==typeof t)return s(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);return"Object"===e&&t.constructor&&(e=t.constructor.name),"Map"===e||"Set"===e?Array.from(t):"Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?s(t,n):void 0}}function s(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,r=new Array(n);e<n;e++)r[e]=t[e];return r}class c{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let e=0;for(let r=0;r<this._n&&r<32;r++){const i=n[r],o=t+i,a=Math.abs(t)<Math.abs(i)?t-(o-i):i-(o-t);a&&(n[e++]=a),t=o}return n[e]=t,this._n=e+1,this}valueOf(){const t=this._partials;let n,e,r,i=this._n,o=0;if(i>0){for(o=t[--i];i>0&&(n=o,e=t[--i],o=n+e,r=e-(o-n),!r););i>0&&(r<0&&t[i-1]<0||r>0&&t[i-1]>0)&&(e=2*r,n=o+e,e==n-o&&(o=n))}return o}}function l(t,n){let e=0,r=0;if(void 0===n)for(let n of t)null!=n&&(n=+n)>=n&&(++e,r+=n);else{let i=-1;for(let o of t)null!=(o=n(o,++i,t))&&(o=+o)>=o&&(++e,r+=o)}if(e)return r/e}function h(t){return Array.from(function*(t){for(const n of t)yield*n}(t))}var d={exports:{}};function p(t,n,e){e=e||2;var r,i,o,a,f,u,s,c=n&&n.length,l=c?n[0]*e:t.length,h=g(t,0,l,e,!0),d=[];if(!h||h.next===h.prev)return d;if(c&&(h=function(t,n,e,r){var i,o,a,f=[];for(i=0,o=n.length;i<o;i++)(a=g(t,n[i]*r,i<o-1?n[i+1]*r:t.length,r,!1))===a.next&&(a.steiner=!0),f.push(k(a));for(f.sort(w),i=0;i<f.length;i++)e=y(e=M(f[i],e),e.next);return e}(t,n,h,e)),t.length>80*e){r=o=t[0],i=a=t[1];for(var p=e;p<l;p+=e)(f=t[p])<r&&(r=f),(u=t[p+1])<i&&(i=u),f>o&&(o=f),u>a&&(a=u);s=0!==(s=Math.max(o-r,a-i))?1/s:0}return b(h,d,e,r,i,s),d}function g(t,n,e,r,i){var o,a;if(i===q(t,n,e,r)>0)for(o=n;o<e;o+=r)a=$(o,t[o],t[o+1],a);else for(o=e-r;o>=n;o-=r)a=$(o,t[o],t[o+1],a);return a&&T(a,a.next)&&(Z(a),a=a.next),a}function y(t,n){if(!t)return t;n||(n=t);var e,r=t;do{if(e=!1,r.steiner||!T(r,r.next)&&0!==P(r.prev,r,r.next))r=r.next;else{if(Z(r),(r=n=r.prev)===r.next)break;e=!0}}while(e||r!==n);return n}function b(t,n,e,r,i,o,a){if(t){!a&&o&&function(t,n,e,r){var i=t;do{null===i.z&&(i.z=E(i.x,i.y,n,e,r)),i.prevZ=i.prev,i.nextZ=i.next,i=i.next}while(i!==t);i.prevZ.nextZ=null,i.prevZ=null,function(t){var n,e,r,i,o,a,f,u,s=1;do{for(e=t,t=null,o=null,a=0;e;){for(a++,r=e,f=0,n=0;n<s&&(f++,r=r.nextZ);n++);for(u=s;f>0||u>0&&r;)0!==f&&(0===u||!r||e.z<=r.z)?(i=e,e=e.nextZ,f--):(i=r,r=r.nextZ,u--),o?o.nextZ=i:t=i,i.prevZ=o,o=i;e=r}o.nextZ=null,s*=2}while(a>1)}(i)}(t,r,i,o);for(var f,u,s=t;t.prev!==t.next;)if(f=t.prev,u=t.next,o?x(t,r,i,o):v(t))n.push(f.i/e),n.push(t.i/e),n.push(u.i/e),Z(t),t=u.next,s=u.next;else if((t=u)===s){a?1===a?b(t=m(y(t),n,e),n,e,r,i,o,2):2===a&&_(t,n,e,r,i,o):b(y(t),n,e,r,i,o,1);break}}}function v(t){var n=t.prev,e=t,r=t.next;if(P(n,e,r)>=0)return!1;for(var i=t.next.next;i!==t.prev;){if(N(n.x,n.y,e.x,e.y,r.x,r.y,i.x,i.y)&&P(i.prev,i,i.next)>=0)return!1;i=i.next}return!0}function x(t,n,e,r){var i=t.prev,o=t,a=t.next;if(P(i,o,a)>=0)return!1;for(var f=i.x<o.x?i.x<a.x?i.x:a.x:o.x<a.x?o.x:a.x,u=i.y<o.y?i.y<a.y?i.y:a.y:o.y<a.y?o.y:a.y,s=i.x>o.x?i.x>a.x?i.x:a.x:o.x>a.x?o.x:a.x,c=i.y>o.y?i.y>a.y?i.y:a.y:o.y>a.y?o.y:a.y,l=E(f,u,n,e,r),h=E(s,c,n,e,r),d=t.prevZ,p=t.nextZ;d&&d.z>=l&&p&&p.z<=h;){if(d!==t.prev&&d!==t.next&&N(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&P(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,p!==t.prev&&p!==t.next&&N(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&P(p.prev,p,p.next)>=0)return!1;p=p.nextZ}for(;d&&d.z>=l;){if(d!==t.prev&&d!==t.next&&N(i.x,i.y,o.x,o.y,a.x,a.y,d.x,d.y)&&P(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;p&&p.z<=h;){if(p!==t.prev&&p!==t.next&&N(i.x,i.y,o.x,o.y,a.x,a.y,p.x,p.y)&&P(p.prev,p,p.next)>=0)return!1;p=p.nextZ}return!0}function m(t,n,e){var r=t;do{var i=r.prev,o=r.next.next;!T(i,o)&&z(i,r,r.next,o)&&I(i,o)&&I(o,i)&&(n.push(i.i/e),n.push(r.i/e),n.push(o.i/e),Z(r),Z(r.next),r=t=o),r=r.next}while(r!==t);return y(r)}function _(t,n,e,r,i,o){var a=t;do{for(var f=a.next.next;f!==a.prev;){if(a.i!==f.i&&A(a,f)){var u=L(a,f);return a=y(a,a.next),u=y(u,u.next),b(a,n,e,r,i,o),void b(u,n,e,r,i,o)}f=f.next}a=a.next}while(a!==t)}function w(t,n){return t.x-n.x}function M(t,n){var e=function(t,n){var e,r=n,i=t.x,o=t.y,a=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var f=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(f<=i&&f>a){if(a=f,f===i){if(o===r.y)return r;if(o===r.next.y)return r.next}e=r.x<r.next.x?r:r.next}}r=r.next}while(r!==n);if(!e)return null;if(i===a)return e;var u,s=e,c=e.x,l=e.y,h=1/0;r=e;do{i>=r.x&&r.x>=c&&i!==r.x&&N(o<l?i:a,o,c,l,o<l?a:i,o,r.x,r.y)&&(u=Math.abs(o-r.y)/(i-r.x),I(r,t)&&(u<h||u===h&&(r.x>e.x||r.x===e.x&&S(e,r)))&&(e=r,h=u)),r=r.next}while(r!==s);return e}(t,n);if(!e)return n;var r=L(e,t),i=y(e,e.next);return y(r,r.next),n===e?i:n}function S(t,n){return P(t.prev,t,n.prev)<0&&P(n.next,t,t.next)<0}function E(t,n,e,r,i){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-e)*i)|t<<8))|t<<4))|t<<2))|t<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=32767*(n-r)*i)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function k(t){var n=t,e=t;do{(n.x<e.x||n.x===e.x&&n.y<e.y)&&(e=n),n=n.next}while(n!==t);return e}function N(t,n,e,r,i,o,a,f){return(i-a)*(n-f)-(t-a)*(o-f)>=0&&(t-a)*(r-f)-(e-a)*(n-f)>=0&&(e-a)*(o-f)-(i-a)*(r-f)>=0}function A(t,n){return t.next.i!==n.i&&t.prev.i!==n.i&&!function(t,n){var e=t;do{if(e.i!==t.i&&e.next.i!==t.i&&e.i!==n.i&&e.next.i!==n.i&&z(e,e.next,t,n))return!0;e=e.next}while(e!==t);return!1}(t,n)&&(I(t,n)&&I(n,t)&&function(t,n){var e=t,r=!1,i=(t.x+n.x)/2,o=(t.y+n.y)/2;do{e.y>o!=e.next.y>o&&e.next.y!==e.y&&i<(e.next.x-e.x)*(o-e.y)/(e.next.y-e.y)+e.x&&(r=!r),e=e.next}while(e!==t);return r}(t,n)&&(P(t.prev,t,n.prev)||P(t,n.prev,n))||T(t,n)&&P(t.prev,t,t.next)>0&&P(n.prev,n,n.next)>0)}function P(t,n,e){return(n.y-t.y)*(e.x-n.x)-(n.x-t.x)*(e.y-n.y)}function T(t,n){return t.x===n.x&&t.y===n.y}function z(t,n,e,r){var i=F(P(t,n,e)),o=F(P(t,n,r)),a=F(P(e,r,t)),f=F(P(e,r,n));return i!==o&&a!==f||(!(0!==i||!j(t,e,n))||(!(0!==o||!j(t,r,n))||(!(0!==a||!j(e,t,r))||!(0!==f||!j(e,n,r)))))}function j(t,n,e){return n.x<=Math.max(t.x,e.x)&&n.x>=Math.min(t.x,e.x)&&n.y<=Math.max(t.y,e.y)&&n.y>=Math.min(t.y,e.y)}function F(t){return t>0?1:t<0?-1:0}function I(t,n){return P(t.prev,t,t.next)<0?P(t,n,t.next)>=0&&P(t,t.prev,n)>=0:P(t,n,t.prev)<0||P(t,t.next,n)<0}function L(t,n){var e=new O(t.i,t.x,t.y),r=new O(n.i,n.x,n.y),i=t.next,o=n.prev;return t.next=n,n.prev=t,e.next=i,i.prev=e,r.next=e,e.prev=r,o.next=r,r.prev=o,r}function $(t,n,e,r){var i=new O(t,n,e);return r?(i.next=r.next,i.prev=r,r.next.prev=i,r.next=i):(i.prev=i,i.next=i),i}function Z(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function O(t,n,e){this.i=t,this.x=n,this.y=e,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function q(t,n,e,r){for(var i=0,o=n,a=e-r;o<e;o+=r)i+=(t[a]-t[o])*(t[o+1]+t[a+1]),a=o;return i}d.exports=p,d.exports.default=p,p.deviation=function(t,n,e,r){var i=n&&n.length,o=i?n[0]*e:t.length,a=Math.abs(q(t,0,o,e));if(i)for(var f=0,u=n.length;f<u;f++){var s=n[f]*e,c=f<u-1?n[f+1]*e:t.length;a-=Math.abs(q(t,s,c,e))}var l=0;for(f=0;f<r.length;f+=3){var h=r[f]*e,d=r[f+1]*e,p=r[f+2]*e;l+=Math.abs((t[h]-t[p])*(t[d+1]-t[h+1])-(t[h]-t[d])*(t[p+1]-t[h+1]))}return 0===a&&0===l?0:Math.abs((l-a)/a)},p.flatten=function(t){for(var n=t[0][0].length,e={vertices:[],holes:[],dimensions:n},r=0,i=0;i<t.length;i++){for(var o=0;o<t[i].length;o++)for(var a=0;a<n;a++)e.vertices.push(t[i][o][a]);i>0&&(r+=t[i-1].length,e.holes.push(r))}return e};var H=d.exports;const R=134217729;function U(t,n,e,r,i){let o,a,f,u,s=n[0],c=r[0],l=0,h=0;c>s==c>-s?(o=s,s=n[++l]):(o=c,c=r[++h]);let d=0;if(l<t&&h<e)for(c>s==c>-s?(a=s+o,f=o-(a-s),s=n[++l]):(a=c+o,f=o-(a-c),c=r[++h]),o=a,0!==f&&(i[d++]=f);l<t&&h<e;)c>s==c>-s?(a=o+s,u=a-o,f=o-(a-u)+(s-u),s=n[++l]):(a=o+c,u=a-o,f=o-(a-u)+(c-u),c=r[++h]),o=a,0!==f&&(i[d++]=f);for(;l<t;)a=o+s,u=a-o,f=o-(a-u)+(s-u),s=n[++l],o=a,0!==f&&(i[d++]=f);for(;h<e;)a=o+c,u=a-o,f=o-(a-u)+(c-u),c=r[++h],o=a,0!==f&&(i[d++]=f);return 0===o&&0!==d||(i[d++]=o),d}function C(t){return new Float64Array(t)}const B=C(4),K=C(8),G=C(12),J=C(16),D=C(4);function V(t,n,e,r,i,o){const a=(n-o)*(e-i),f=(t-i)*(r-o),u=a-f;if(0===a||0===f||a>0!=f>0)return u;const s=Math.abs(a+f);return Math.abs(u)>=33306690738754716e-32*s?u:-function(t,n,e,r,i,o,a){let f,u,s,c,l,h,d,p,g,y,b,v,x,m,_,w,M,S;const E=t-i,k=e-i,N=n-o,A=r-o;m=E*A,h=R*E,d=h-(h-E),p=E-d,h=R*A,g=h-(h-A),y=A-g,_=p*y-(m-d*g-p*g-d*y),w=N*k,h=R*N,d=h-(h-N),p=N-d,h=R*k,g=h-(h-k),y=k-g,M=p*y-(w-d*g-p*g-d*y),b=_-M,l=_-b,B[0]=_-(b+l)+(l-M),v=m+b,l=v-m,x=m-(v-l)+(b-l),b=x-w,l=x-b,B[1]=x-(b+l)+(l-w),S=v+b,l=S-v,B[2]=v-(S-l)+(b-l),B[3]=S;let P=function(t,n){let e=n[0];for(let r=1;r<t;r++)e+=n[r];return e}(4,B),T=22204460492503146e-32*a;if(P>=T||-P>=T)return P;if(l=t-E,f=t-(E+l)+(l-i),l=e-k,s=e-(k+l)+(l-i),l=n-N,u=n-(N+l)+(l-o),l=r-A,c=r-(A+l)+(l-o),0===f&&0===u&&0===s&&0===c)return P;if(T=11093356479670487e-47*a+33306690738754706e-32*Math.abs(P),P+=E*c+A*f-(N*s+k*u),P>=T||-P>=T)return P;m=f*A,h=R*f,d=h-(h-f),p=f-d,h=R*A,g=h-(h-A),y=A-g,_=p*y-(m-d*g-p*g-d*y),w=u*k,h=R*u,d=h-(h-u),p=u-d,h=R*k,g=h-(h-k),y=k-g,M=p*y-(w-d*g-p*g-d*y),b=_-M,l=_-b,D[0]=_-(b+l)+(l-M),v=m+b,l=v-m,x=m-(v-l)+(b-l),b=x-w,l=x-b,D[1]=x-(b+l)+(l-w),S=v+b,l=S-v,D[2]=v-(S-l)+(b-l),D[3]=S;const z=U(4,B,4,D,K);m=E*c,h=R*E,d=h-(h-E),p=E-d,h=R*c,g=h-(h-c),y=c-g,_=p*y-(m-d*g-p*g-d*y),w=N*s,h=R*N,d=h-(h-N),p=N-d,h=R*s,g=h-(h-s),y=s-g,M=p*y-(w-d*g-p*g-d*y),b=_-M,l=_-b,D[0]=_-(b+l)+(l-M),v=m+b,l=v-m,x=m-(v-l)+(b-l),b=x-w,l=x-b,D[1]=x-(b+l)+(l-w),S=v+b,l=S-v,D[2]=v-(S-l)+(b-l),D[3]=S;const j=U(z,K,4,D,G);m=f*c,h=R*f,d=h-(h-f),p=f-d,h=R*c,g=h-(h-c),y=c-g,_=p*y-(m-d*g-p*g-d*y),w=u*s,h=R*u,d=h-(h-u),p=u-d,h=R*s,g=h-(h-s),y=s-g,M=p*y-(w-d*g-p*g-d*y),b=_-M,l=_-b,D[0]=_-(b+l)+(l-M),v=m+b,l=v-m,x=m-(v-l)+(b-l),b=x-w,l=x-b,D[1]=x-(b+l)+(l-w),S=v+b,l=S-v,D[2]=v-(S-l)+(b-l),D[3]=S;const F=U(j,G,4,D,J);return J[F-1]}(t,n,e,r,i,o,s)}const W=Math.pow(2,-52),X=new Uint32Array(512);class Y{static from(t,n=it,e=ot){const r=t.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=t[o];i[2*o]=n(r),i[2*o+1]=e(r)}return new Y(i)}constructor(t){const n=t.length>>1;if(n>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const e=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*e),this._halfedges=new Int32Array(3*e),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:e,_hullTri:r,_hullHash:i}=this,o=t.length>>1;let a=1/0,f=1/0,u=-1/0,s=-1/0;for(let n=0;n<o;n++){const e=t[2*n],r=t[2*n+1];e<a&&(a=e),r<f&&(f=r),e>u&&(u=e),r>s&&(s=r),this._ids[n]=n}const c=(a+u)/2,l=(f+s)/2;let h,d,p,g=1/0;for(let n=0;n<o;n++){const e=Q(c,l,t[2*n],t[2*n+1]);e<g&&(h=n,g=e)}const y=t[2*h],b=t[2*h+1];g=1/0;for(let n=0;n<o;n++){if(n===h)continue;const e=Q(y,b,t[2*n],t[2*n+1]);e<g&&e>0&&(d=n,g=e)}let v=t[2*d],x=t[2*d+1],m=1/0;for(let n=0;n<o;n++){if(n===h||n===d)continue;const e=nt(y,b,v,x,t[2*n],t[2*n+1]);e<m&&(p=n,m=e)}let _=t[2*p],w=t[2*p+1];if(m===1/0){for(let n=0;n<o;n++)this._dists[n]=t[2*n]-t[0]||t[2*n+1]-t[1];et(this._ids,this._dists,0,o-1);const n=new Uint32Array(o);let e=0;for(let t=0,r=-1/0;t<o;t++){const i=this._ids[t];this._dists[i]>r&&(n[e++]=i,r=this._dists[i])}return this.hull=n.subarray(0,e),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(V(y,b,v,x,_,w)<0){const t=d,n=v,e=x;d=p,v=_,x=w,p=t,_=n,w=e}const M=function(t,n,e,r,i,o){const a=e-t,f=r-n,u=i-t,s=o-n,c=a*a+f*f,l=u*u+s*s,h=.5/(a*s-f*u);return{x:t+(s*c-f*l)*h,y:n+(a*l-u*c)*h}}(y,b,v,x,_,w);this._cx=M.x,this._cy=M.y;for(let n=0;n<o;n++)this._dists[n]=Q(t[2*n],t[2*n+1],M.x,M.y);et(this._ids,this._dists,0,o-1),this._hullStart=h;let S=3;e[h]=n[p]=d,e[d]=n[h]=p,e[p]=n[d]=h,r[h]=0,r[d]=1,r[p]=2,i.fill(-1),i[this._hashKey(y,b)]=h,i[this._hashKey(v,x)]=d,i[this._hashKey(_,w)]=p,this.trianglesLen=0,this._addTriangle(h,d,p,-1,-1,-1);for(let o,a,f=0;f<this._ids.length;f++){const u=this._ids[f],s=t[2*u],c=t[2*u+1];if(f>0&&Math.abs(s-o)<=W&&Math.abs(c-a)<=W)continue;if(o=s,a=c,u===h||u===d||u===p)continue;let l=0;for(let t=0,n=this._hashKey(s,c);t<this._hashSize&&(l=i[(n+t)%this._hashSize],-1===l||l===e[l]);t++);l=n[l];let g,y=l;for(;g=e[y],V(s,c,t[2*y],t[2*y+1],t[2*g],t[2*g+1])>=0;)if(y=g,y===l){y=-1;break}if(-1===y)continue;let b=this._addTriangle(y,u,e[y],-1,-1,r[y]);r[u]=this._legalize(b+2),r[y]=b,S++;let v=e[y];for(;g=e[v],V(s,c,t[2*v],t[2*v+1],t[2*g],t[2*g+1])<0;)b=this._addTriangle(v,u,g,r[u],-1,r[v]),r[u]=this._legalize(b+2),e[v]=v,S--,v=g;if(y===l)for(;g=n[y],V(s,c,t[2*g],t[2*g+1],t[2*y],t[2*y+1])<0;)b=this._addTriangle(g,u,y,-1,r[y],r[g]),this._legalize(b+2),r[g]=b,e[y]=y,S--,y=g;this._hullStart=n[u]=y,e[y]=n[v]=u,e[u]=v,i[this._hashKey(s,c)]=u,i[this._hashKey(t[2*y],t[2*y+1])]=y}this.hull=new Uint32Array(S);for(let t=0,n=this._hullStart;t<S;t++)this.hull[t]=n,n=e[n];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(function(t,n){const e=t/(Math.abs(t)+Math.abs(n));return(n>0?3-e:1+e)/4}(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:e,coords:r}=this;let i=0,o=0;for(;;){const a=e[t],f=t-t%3;if(o=f+(t+2)%3,-1===a){if(0===i)break;t=X[--i];continue}const u=a-a%3,s=f+(t+1)%3,c=u+(a+2)%3,l=n[o],h=n[t],d=n[s],p=n[c];if(tt(r[2*l],r[2*l+1],r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*p],r[2*p+1])){n[t]=p,n[a]=l;const r=e[c];if(-1===r){let n=this._hullStart;do{if(this._hullTri[n]===c){this._hullTri[n]=t;break}n=this._hullPrev[n]}while(n!==this._hullStart)}this._link(t,r),this._link(a,e[o]),this._link(o,c);const f=u+(a+1)%3;i<X.length&&(X[i++]=f)}else{if(0===i)break;t=X[--i]}}return o}_link(t,n){this._halfedges[t]=n,-1!==n&&(this._halfedges[n]=t)}_addTriangle(t,n,e,r,i,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=e,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function Q(t,n,e,r){const i=t-e,o=n-r;return i*i+o*o}function tt(t,n,e,r,i,o,a,f){const u=t-a,s=n-f,c=e-a,l=r-f,h=i-a,d=o-f,p=c*c+l*l,g=h*h+d*d;return u*(l*g-p*d)-s*(c*g-p*h)+(u*u+s*s)*(c*d-l*h)<0}function nt(t,n,e,r,i,o){const a=e-t,f=r-n,u=i-t,s=o-n,c=a*a+f*f,l=u*u+s*s,h=.5/(a*s-f*u),d=(s*c-f*l)*h,p=(a*l-u*c)*h;return d*d+p*p}function et(t,n,e,r){if(r-e<=20)for(let i=e+1;i<=r;i++){const r=t[i],o=n[r];let a=i-1;for(;a>=e&&n[t[a]]>o;)t[a+1]=t[a--];t[a+1]=r}else{let i=e+1,o=r;rt(t,e+r>>1,i),n[t[e]]>n[t[r]]&&rt(t,e,r),n[t[i]]>n[t[r]]&&rt(t,i,r),n[t[e]]>n[t[i]]&&rt(t,e,i);const a=t[i],f=n[a];for(;;){do{i++}while(n[t[i]]<f);do{o--}while(n[t[o]]>f);if(o<i)break;rt(t,i,o)}t[e+1]=t[o],t[o]=a,r-i+1>=o-e?(et(t,n,i,r),et(t,n,e,o-1)):(et(t,n,e,o-1),et(t,n,i,r))}}function rt(t,n,e){const r=t[n];t[n]=t[e],t[e]=r}function it(t){return t[0]}function ot(t){return t[1]}function at(t,n,e){if(void 0===e&&(e={}),!t)throw new Error("point is required");if(!n)throw new Error("polygon is required");var r,i=function(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if("Feature"===t.type&&null!==t.geometry&&"Point"===t.geometry.type)return t.geometry.coordinates;if("Point"===t.type)return t.coordinates}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return t;throw new Error("coord must be GeoJSON Point or an Array of numbers")}(t),o="Feature"===(r=n).type?r.geometry:r,a=o.type,f=n.bbox,u=o.coordinates;if(f&&!1===function(t,n){return n[0]<=t[0]&&n[1]<=t[1]&&n[2]>=t[0]&&n[3]>=t[1]}(i,f))return!1;"Polygon"===a&&(u=[u]);for(var s=!1,c=0;c<u.length&&!s;c++)if(ft(i,u[c][0],e.ignoreBoundary)){for(var l=!1,h=1;h<u[c].length&&!l;)ft(i,u[c][h],!e.ignoreBoundary)&&(l=!0),h++;l||(s=!0)}return s}function ft(t,n,e){var r=!1;n[0][0]===n[n.length-1][0]&&n[0][1]===n[n.length-1][1]&&(n=n.slice(0,n.length-1));for(var i=0,o=n.length-1;i<n.length;o=i++){var a=n[i][0],f=n[i][1],u=n[o][0],s=n[o][1];if(t[1]*(a-u)+f*(u-t[0])+s*(t[0]-a)==0&&(a-t[0])*(u-t[0])<=0&&(f-t[1])*(s-t[1])<=0)return!e;f>t[1]!=s>t[1]&&t[0]<(u-a)*(t[1]-f)/(s-f)+a&&(r=!r)}return r}var ut=1e-6,st=Math.PI,ct=st/2,lt=st/4,ht=2*st,dt=180/st,pt=st/180,gt=Math.abs,yt=Math.atan2,bt=Math.cos,vt=Math.sin,xt=Math.sign||function(t){return t>0?1:t<0?-1:0},mt=Math.sqrt;function _t(t){return t>1?ct:t<-1?-ct:Math.asin(t)}function wt(t){return(t=vt(t/2))*t}function Mt(){}function St(t,n){t&&kt.hasOwnProperty(t.type)&&kt[t.type](t,n)}var Et={Feature:function(t,n){St(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)St(e[r].geometry,n)}},kt={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){Nt(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Nt(e[r],n,0)},Polygon:function(t,n){At(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)At(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)St(e[r],n)}};function Nt(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function At(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)Nt(t[e],n,1);n.polygonEnd()}function Pt(t,n){t&&Et.hasOwnProperty(t.type)?Et[t.type](t,n):St(t,n)}var Tt,zt,jt,Ft,It,Lt,$t,Zt,Ot,qt,Ht,Rt,Ut,Ct,Bt,Kt,Gt=new c,Jt=new c,Dt={point:Mt,lineStart:Mt,lineEnd:Mt,polygonStart:function(){Gt=new c,Dt.lineStart=Vt,Dt.lineEnd=Wt},polygonEnd:function(){var t=+Gt;Jt.add(t<0?ht+t:t),this.lineStart=this.lineEnd=this.point=Mt},sphere:function(){Jt.add(ht)}};function Vt(){Dt.point=Xt}function Wt(){Yt(Tt,zt)}function Xt(t,n){Dt.point=Yt,Tt=t,zt=n,jt=t*=pt,Ft=bt(n=(n*=pt)/2+lt),It=vt(n)}function Yt(t,n){var e=(t*=pt)-jt,r=e>=0?1:-1,i=r*e,o=bt(n=(n*=pt)/2+lt),a=vt(n),f=It*a,u=Ft*o+f*bt(i),s=f*r*vt(i);Gt.add(yt(s,u)),jt=t,Ft=o,It=a}function Qt(t){var n=t[0],e=t[1],r=bt(e);return[r*bt(n),r*vt(n),vt(e)]}function tn(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function nn(t){var n=mt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}var en,rn,on,an,fn={point:un,lineStart:cn,lineEnd:ln,polygonStart:function(){fn.point=hn,fn.lineStart=dn,fn.lineEnd=pn,Ct=new c,Dt.polygonStart()},polygonEnd:function(){Dt.polygonEnd(),fn.point=un,fn.lineStart=cn,fn.lineEnd=ln,Gt<0?(Lt=-(Zt=180),$t=-(Ot=90)):Ct>ut?Ot=90:Ct<-1e-6&&($t=-90),Kt[0]=Lt,Kt[1]=Zt},sphere:function(){Lt=-(Zt=180),$t=-(Ot=90)}};function un(t,n){Bt.push(Kt=[Lt=t,Zt=t]),n<$t&&($t=n),n>Ot&&(Ot=n)}function sn(t,n){var e=Qt([t*pt,n*pt]);if(Ut){var r=tn(Ut,e),i=tn([r[1],-r[0],0],r);nn(i),i=function(t){return[yt(t[1],t[0]),_t(t[2])]}(i);var o,a=t-qt,f=a>0?1:-1,u=i[0]*dt*f,s=gt(a)>180;s^(f*qt<u&&u<f*t)?(o=i[1]*dt)>Ot&&(Ot=o):s^(f*qt<(u=(u+360)%360-180)&&u<f*t)?(o=-i[1]*dt)<$t&&($t=o):(n<$t&&($t=n),n>Ot&&(Ot=n)),s?t<qt?gn(Lt,t)>gn(Lt,Zt)&&(Zt=t):gn(t,Zt)>gn(Lt,Zt)&&(Lt=t):Zt>=Lt?(t<Lt&&(Lt=t),t>Zt&&(Zt=t)):t>qt?gn(Lt,t)>gn(Lt,Zt)&&(Zt=t):gn(t,Zt)>gn(Lt,Zt)&&(Lt=t)}else Bt.push(Kt=[Lt=t,Zt=t]);n<$t&&($t=n),n>Ot&&(Ot=n),Ut=e,qt=t}function cn(){fn.point=sn}function ln(){Kt[0]=Lt,Kt[1]=Zt,fn.point=un,Ut=null}function hn(t,n){if(Ut){var e=t-qt;Ct.add(gt(e)>180?e+(e>0?360:-360):e)}else Ht=t,Rt=n;Dt.point(t,n),sn(t,n)}function dn(){Dt.lineStart()}function pn(){hn(Ht,Rt),Dt.lineEnd(),gt(Ct)>ut&&(Lt=-(Zt=180)),Kt[0]=Lt,Kt[1]=Zt,Ut=null}function gn(t,n){return(n-=t)<0?n+360:n}function yn(t,n){return t[0]-n[0]}function bn(t,n){return t[0]<=t[1]?t[0]<=n&&n<=t[1]:n<t[0]||t[1]<n}function vn(t){var n,e,r,i,o,a,f;if(Ot=Zt=-(Lt=$t=1/0),Bt=[],Pt(t,fn),e=Bt.length){for(Bt.sort(yn),n=1,o=[r=Bt[0]];n<e;++n)bn(r,(i=Bt[n])[0])||bn(r,i[1])?(gn(r[0],i[1])>gn(r[0],r[1])&&(r[1]=i[1]),gn(i[0],r[1])>gn(r[0],r[1])&&(r[0]=i[0])):o.push(r=i);for(a=-1/0,n=0,r=o[e=o.length-1];n<=e;r=i,++n)i=o[n],(f=gn(r[1],i[0]))>a&&(a=f,Lt=i[0],Zt=r[1])}return Bt=Kt=null,Lt===1/0||$t===1/0?[[NaN,NaN],[NaN,NaN]]:[[Lt,$t],[Zt,Ot]]}function xn(t){return gt(t[0])<=st?t[0]:xt(t[0])*((gt(t[0])+st)%ht-st)}var mn={sphere:Mt,point:Mt,lineStart:function(){mn.point=wn,mn.lineEnd=_n},lineEnd:Mt,polygonStart:Mt,polygonEnd:Mt};function _n(){mn.point=mn.lineEnd=Mt}function wn(t,n){rn=t*=pt,on=vt(n*=pt),an=bt(n),mn.point=Mn}function Mn(t,n){t*=pt;var e=vt(n*=pt),r=bt(n),i=gt(t-rn),o=bt(i),a=r*vt(i),f=an*e-on*r*o,u=on*e+an*r*o;en.add(yt(mt(a*a+f*f),u)),rn=t,on=e,an=r}var Sn=[null,null],En={type:"LineString",coordinates:Sn};function kn(t,n){return Sn[0]=t,Sn[1]=n,function(t){return en=new c,Pt(t,mn),+en}(En)}var Nn={Feature:function(t,n){return Pn(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)if(Pn(e[r].geometry,n))return!0;return!1}},An={Sphere:function(){return!0},Point:function(t,n){return Tn(t.coordinates,n)},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(Tn(e[r],n))return!0;return!1},LineString:function(t,n){return zn(t.coordinates,n)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(zn(e[r],n))return!0;return!1},Polygon:function(t,n){return jn(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)if(jn(e[r],n))return!0;return!1},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)if(Pn(e[r],n))return!0;return!1}};function Pn(t,n){return!(!t||!An.hasOwnProperty(t.type))&&An[t.type](t,n)}function Tn(t,n){return 0===kn(t,n)}function zn(t,n){for(var e,r,i,o=0,a=t.length;o<a;o++){if(0===(r=kn(t[o],n)))return!0;if(o>0&&(i=kn(t[o],t[o-1]))>0&&e<=i&&r<=i&&(e+r-i)*(1-Math.pow((e-r)/i,2))<1e-12*i)return!0;e=r}return!1}function jn(t,n){return!!function(t,n){var e=xn(n),r=n[1],i=vt(r),o=[vt(e),-bt(e),0],a=0,f=0,u=new c;1===i?r=ct+ut:-1===i&&(r=-ct-ut);for(var s=0,l=t.length;s<l;++s)if(d=(h=t[s]).length)for(var h,d,p=h[d-1],g=xn(p),y=p[1]/2+lt,b=vt(y),v=bt(y),x=0;x<d;++x,g=_,b=M,v=S,p=m){var m=h[x],_=xn(m),w=m[1]/2+lt,M=vt(w),S=bt(w),E=_-g,k=E>=0?1:-1,N=k*E,A=N>st,P=b*M;if(u.add(yt(P*k*vt(N),v*S+P*bt(N))),a+=A?E+k*ht:E,A^g>=e^_>=e){var T=tn(Qt(p),Qt(m));nn(T);var z=tn(o,T);nn(z);var j=(A^E>=0?-1:1)*_t(z[2]);(r>j||r===j&&(T[0]||T[1]))&&(f+=A^E>=0?1:-1)}}return(a<-1e-6||a<ut&&u<-1e-12)^1&f}(t.map(Fn),In(n))}function Fn(t){return(t=t.map(In)).pop(),t}function In(t){return[t[0]*pt,t[1]*pt]}function Ln(t,n){return(t&&Nn.hasOwnProperty(t.type)?Nn[t.type]:Pn)(t,n)}const $n=Math.pow(2,-52),Zn=new Uint32Array(512);class On{static from(t,n=Gn,e=Jn){const r=t.length,i=new Float64Array(2*r);for(let o=0;o<r;o++){const r=t[o];i[2*o]=n(r),i[2*o+1]=e(r)}return new On(i)}constructor(t){const n=t.length>>1;if(n>0&&"number"!=typeof t[0])throw new Error("Expected coords to contain numbers.");this.coords=t;const e=Math.max(2*n-5,0);this._triangles=new Uint32Array(3*e),this._halfedges=new Int32Array(3*e),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize).fill(-1),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:e,_hullTri:r,_hullHash:i}=this,o=t.length>>1;let a=1/0,f=1/0,u=-1/0,s=-1/0;for(let n=0;n<o;n++){const e=t[2*n],r=t[2*n+1];e<a&&(a=e),r<f&&(f=r),e>u&&(u=e),r>s&&(s=r),this._ids[n]=n}const c=(a+u)/2,l=(f+s)/2;let h,d,p,g=1/0;for(let n=0;n<o;n++){const e=qn(c,l,t[2*n],t[2*n+1]);e<g&&(h=n,g=e)}const y=t[2*h],b=t[2*h+1];g=1/0;for(let n=0;n<o;n++){if(n===h)continue;const e=qn(y,b,t[2*n],t[2*n+1]);e<g&&e>0&&(d=n,g=e)}let v=t[2*d],x=t[2*d+1],m=1/0;for(let n=0;n<o;n++){if(n===h||n===d)continue;const e=Cn(y,b,v,x,t[2*n],t[2*n+1]);e<m&&(p=n,m=e)}let _=t[2*p],w=t[2*p+1];if(m===1/0){for(let n=0;n<o;n++)this._dists[n]=t[2*n]-t[0]||t[2*n+1]-t[1];Bn(this._ids,this._dists,0,o-1);const n=new Uint32Array(o);let e=0;for(let t=0,r=-1/0;t<o;t++){const i=this._ids[t];this._dists[i]>r&&(n[e++]=i,r=this._dists[i])}return this.hull=n.subarray(0,e),this.triangles=new Uint32Array(0),void(this.halfedges=new Uint32Array(0))}if(Rn(y,b,v,x,_,w)){const t=d,n=v,e=x;d=p,v=_,x=w,p=t,_=n,w=e}const M=function(t,n,e,r,i,o){const a=e-t,f=r-n,u=i-t,s=o-n,c=a*a+f*f,l=u*u+s*s,h=.5/(a*s-f*u);return{x:t+(s*c-f*l)*h,y:n+(a*l-u*c)*h}}(y,b,v,x,_,w);this._cx=M.x,this._cy=M.y;for(let n=0;n<o;n++)this._dists[n]=qn(t[2*n],t[2*n+1],M.x,M.y);Bn(this._ids,this._dists,0,o-1),this._hullStart=h;let S=3;e[h]=n[p]=d,e[d]=n[h]=p,e[p]=n[d]=h,r[h]=0,r[d]=1,r[p]=2,i.fill(-1),i[this._hashKey(y,b)]=h,i[this._hashKey(v,x)]=d,i[this._hashKey(_,w)]=p,this.trianglesLen=0,this._addTriangle(h,d,p,-1,-1,-1);for(let o,a,f=0;f<this._ids.length;f++){const u=this._ids[f],s=t[2*u],c=t[2*u+1];if(f>0&&Math.abs(s-o)<=$n&&Math.abs(c-a)<=$n)continue;if(o=s,a=c,u===h||u===d||u===p)continue;let l=0;for(let t=0,n=this._hashKey(s,c);t<this._hashSize&&(l=i[(n+t)%this._hashSize],-1===l||l===e[l]);t++);l=n[l];let g,y=l;for(;g=e[y],!Rn(s,c,t[2*y],t[2*y+1],t[2*g],t[2*g+1]);)if(y=g,y===l){y=-1;break}if(-1===y)continue;let b=this._addTriangle(y,u,e[y],-1,-1,r[y]);r[u]=this._legalize(b+2),r[y]=b,S++;let v=e[y];for(;g=e[v],Rn(s,c,t[2*v],t[2*v+1],t[2*g],t[2*g+1]);)b=this._addTriangle(v,u,g,r[u],-1,r[v]),r[u]=this._legalize(b+2),e[v]=v,S--,v=g;if(y===l)for(;g=n[y],Rn(s,c,t[2*g],t[2*g+1],t[2*y],t[2*y+1]);)b=this._addTriangle(g,u,y,-1,r[y],r[g]),this._legalize(b+2),r[g]=b,e[y]=y,S--,y=g;this._hullStart=n[u]=y,e[y]=n[v]=u,e[u]=v,i[this._hashKey(s,c)]=u,i[this._hashKey(t[2*y],t[2*y+1])]=y}this.hull=new Uint32Array(S);for(let t=0,n=this._hullStart;t<S;t++)this.hull[t]=n,n=e[n];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(function(t,n){const e=t/(Math.abs(t)+Math.abs(n));return(n>0?3-e:1+e)/4}(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:e,coords:r}=this;let i=0,o=0;for(;;){const a=e[t],f=t-t%3;if(o=f+(t+2)%3,-1===a){if(0===i)break;t=Zn[--i];continue}const u=a-a%3,s=f+(t+1)%3,c=u+(a+2)%3,l=n[o],h=n[t],d=n[s],p=n[c];if(Un(r[2*l],r[2*l+1],r[2*h],r[2*h+1],r[2*d],r[2*d+1],r[2*p],r[2*p+1])){n[t]=p,n[a]=l;const r=e[c];if(-1===r){let n=this._hullStart;do{if(this._hullTri[n]===c){this._hullTri[n]=t;break}n=this._hullPrev[n]}while(n!==this._hullStart)}this._link(t,r),this._link(a,e[o]),this._link(o,c);const f=u+(a+1)%3;i<Zn.length&&(Zn[i++]=f)}else{if(0===i)break;t=Zn[--i]}}return o}_link(t,n){this._halfedges[t]=n,-1!==n&&(this._halfedges[n]=t)}_addTriangle(t,n,e,r,i,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=e,this._link(a,r),this._link(a+1,i),this._link(a+2,o),this.trianglesLen+=3,a}}function qn(t,n,e,r){const i=t-e,o=n-r;return i*i+o*o}function Hn(t,n,e,r,i,o){const a=(r-n)*(i-t),f=(e-t)*(o-n);return Math.abs(a-f)>=33306690738754716e-32*Math.abs(a+f)?a-f:0}function Rn(t,n,e,r,i,o){return(Hn(i,o,t,n,e,r)||Hn(t,n,e,r,i,o)||Hn(e,r,i,o,t,n))<0}function Un(t,n,e,r,i,o,a,f){const u=t-a,s=n-f,c=e-a,l=r-f,h=i-a,d=o-f,p=c*c+l*l,g=h*h+d*d;return u*(l*g-p*d)-s*(c*g-p*h)+(u*u+s*s)*(c*d-l*h)<0}function Cn(t,n,e,r,i,o){const a=e-t,f=r-n,u=i-t,s=o-n,c=a*a+f*f,l=u*u+s*s,h=.5/(a*s-f*u),d=(s*c-f*l)*h,p=(a*l-u*c)*h;return d*d+p*p}function Bn(t,n,e,r){if(r-e<=20)for(let i=e+1;i<=r;i++){const r=t[i],o=n[r];let a=i-1;for(;a>=e&&n[t[a]]>o;)t[a+1]=t[a--];t[a+1]=r}else{let i=e+1,o=r;Kn(t,e+r>>1,i),n[t[e]]>n[t[r]]&&Kn(t,e,r),n[t[i]]>n[t[r]]&&Kn(t,i,r),n[t[e]]>n[t[i]]&&Kn(t,e,i);const a=t[i],f=n[a];for(;;){do{i++}while(n[t[i]]<f);do{o--}while(n[t[o]]>f);if(o<i)break;Kn(t,i,o)}t[e+1]=t[o],t[o]=a,r-i+1>=o-e?(Bn(t,n,i,r),Bn(t,n,e,o-1)):(Bn(t,n,e,o-1),Bn(t,n,i,r))}}function Kn(t,n,e){const r=t[n];t[n]=t[e],t[e]=r}function Gn(t){return t[0]}function Jn(t){return t[1]}const Dn=1e-6;class Vn{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,e){const r=(t=+t)+(e=+e),i=n=+n;if(e<0)throw new Error("negative radius");null===this._x1?this._+=`M${r},${i}`:(Math.abs(this._x1-r)>Dn||Math.abs(this._y1-i)>Dn)&&(this._+="L"+r+","+i),e&&(this._+=`A${e},${e},0,1,1,${t-e},${n}A${e},${e},0,1,1,${this._x1=r},${this._y1=i}`)}rect(t,n,e,r){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+e}v${+r}h${-e}Z`}value(){return this._||null}}class Wn{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}class Xn{constructor(t,[n,e,r,i]=[0,0,960,500]){if(!((r=+r)>=(n=+n)&&(i=+i)>=(e=+e)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(2*t.points.length),this.vectors=new Float64Array(2*t.points.length),this.xmax=r,this.xmin=n,this.ymax=i,this.ymin=e,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:e},vectors:r}=this,i=this.circumcenters=this._circumcenters.subarray(0,e.length/3*2);for(let n,r,o=0,a=0,f=e.length;o<f;o+=3,a+=2){const f=2*e[o],u=2*e[o+1],s=2*e[o+2],c=t[f],l=t[f+1],h=t[u],d=t[u+1],p=t[s],g=t[s+1],y=h-c,b=d-l,v=p-c,x=g-l,m=y*y+b*b,_=v*v+x*x,w=2*(y*x-b*v);if(w)if(Math.abs(w)<1e-8)n=(c+p)/2,r=(l+g)/2;else{const t=1/w;n=c+(x*m-b*_)*t,r=l+(y*_-v*m)*t}else n=(c+p)/2-1e8*x,r=(l+g)/2+1e8*v;i[a]=n,i[a+1]=r}let o,a,f,u=n[n.length-1],s=4*u,c=t[2*u],l=t[2*u+1];r.fill(0);for(let e=0;e<n.length;++e)u=n[e],o=s,a=c,f=l,s=4*u,c=t[2*u],l=t[2*u+1],r[o+2]=r[s]=f-l,r[o+3]=r[s+1]=c-a}render(t){const n=null==t?t=new Vn:void 0,{delaunay:{halfedges:e,inedges:r,hull:i},circumcenters:o,vectors:a}=this;if(i.length<=1)return null;for(let n=0,r=e.length;n<r;++n){const r=e[n];if(r<n)continue;const i=2*Math.floor(n/3),a=2*Math.floor(r/3),f=o[i],u=o[i+1],s=o[a],c=o[a+1];this._renderSegment(f,u,s,c,t)}let f,u=i[i.length-1];for(let n=0;n<i.length;++n){f=u,u=i[n];const e=2*Math.floor(r[u]/3),s=o[e],c=o[e+1],l=4*f,h=this._project(s,c,a[l+2],a[l+3]);h&&this._renderSegment(s,c,h[0],h[1],t)}return n&&n.value()}renderBounds(t){const n=null==t?t=new Vn:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const e=null==n?n=new Vn:void 0,r=this._clip(t);if(null===r||!r.length)return;n.moveTo(r[0],r[1]);let i=r.length;for(;r[0]===r[i-2]&&r[1]===r[i-1]&&i>1;)i-=2;for(let t=2;t<i;t+=2)r[t]===r[t-2]&&r[t+1]===r[t-1]||n.lineTo(r[t],r[t+1]);return n.closePath(),e&&e.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,e=t.length/2;n<e;++n){const t=this.cellPolygon(n);t&&(t.index=n,yield t)}}cellPolygon(t){const n=new Wn;return this.renderCell(t,n),n.value()}_renderSegment(t,n,e,r,i){let o;const a=this._regioncode(t,n),f=this._regioncode(e,r);0===a&&0===f?(i.moveTo(t,n),i.lineTo(e,r)):(o=this._clipSegment(t,n,e,r,a,f))&&(i.moveTo(o[0],o[1]),i.lineTo(o[2],o[3]))}contains(t,n,e){return(n=+n)==n&&(e=+e)==e&&this.delaunay._step(t,n,e)===t}*neighbors(t){const n=this._clip(t);if(n)for(const e of this.delaunay.neighbors(t)){const t=this._clip(e);if(t)t:for(let r=0,i=n.length;r<i;r+=2)for(let o=0,a=t.length;o<a;o+=2)if(n[r]==t[o]&&n[r+1]==t[o+1]&&n[(r+2)%i]==t[(o+a-2)%a]&&n[(r+3)%i]==t[(o+a-1)%a]){yield e;break t}}}_cell(t){const{circumcenters:n,delaunay:{inedges:e,halfedges:r,triangles:i}}=this,o=e[t];if(-1===o)return null;const a=[];let f=o;do{const e=Math.floor(f/3);if(a.push(n[2*e],n[2*e+1]),f=f%3==2?f-2:f+1,i[f]!==t)break;f=r[f]}while(f!==o&&-1!==f);return a}_clip(t){if(0===t&&1===this.delaunay.hull.length)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(null===n)return null;const{vectors:e}=this,r=4*t;return e[r]||e[r+1]?this._clipInfinite(t,n,e[r],e[r+1],e[r+2],e[r+3]):this._clipFinite(t,n)}_clipFinite(t,n){const e=n.length;let r,i,o,a,f,u=null,s=n[e-2],c=n[e-1],l=this._regioncode(s,c);for(let h=0;h<e;h+=2)if(r=s,i=c,s=n[h],c=n[h+1],o=l,l=this._regioncode(s,c),0===o&&0===l)a=f,f=0,u?u.push(s,c):u=[s,c];else{let n,e,h,d,p;if(0===o){if(null===(n=this._clipSegment(r,i,s,c,o,l)))continue;[e,h,d,p]=n}else{if(null===(n=this._clipSegment(s,c,r,i,l,o)))continue;[d,p,e,h]=n,a=f,f=this._edgecode(e,h),a&&f&&this._edge(t,a,f,u,u.length),u?u.push(e,h):u=[e,h]}a=f,f=this._edgecode(d,p),a&&f&&this._edge(t,a,f,u,u.length),u?u.push(d,p):u=[d,p]}if(u)a=f,f=this._edgecode(u[0],u[1]),a&&f&&this._edge(t,a,f,u,u.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return u}_clipSegment(t,n,e,r,i,o){for(;;){if(0===i&&0===o)return[t,n,e,r];if(i&o)return null;let a,f,u=i||o;8&u?(a=t+(e-t)*(this.ymax-n)/(r-n),f=this.ymax):4&u?(a=t+(e-t)*(this.ymin-n)/(r-n),f=this.ymin):2&u?(f=n+(r-n)*(this.xmax-t)/(e-t),a=this.xmax):(f=n+(r-n)*(this.xmin-t)/(e-t),a=this.xmin),i?(t=a,n=f,i=this._regioncode(t,n)):(e=a,r=f,o=this._regioncode(e,r))}}_clipInfinite(t,n,e,r,i,o){let a,f=Array.from(n);if((a=this._project(f[0],f[1],e,r))&&f.unshift(a[0],a[1]),(a=this._project(f[f.length-2],f[f.length-1],i,o))&&f.push(a[0],a[1]),f=this._clipFinite(t,f))for(let n,e=0,r=f.length,i=this._edgecode(f[r-2],f[r-1]);e<r;e+=2)n=i,i=this._edgecode(f[e],f[e+1]),n&&i&&(e=this._edge(t,n,i,f,e),r=f.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(f=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return f}_edge(t,n,e,r,i){for(;n!==e;){let e,o;switch(n){case 5:n=4;continue;case 4:n=6,e=this.xmax,o=this.ymin;break;case 6:n=2;continue;case 2:n=10,e=this.xmax,o=this.ymax;break;case 10:n=8;continue;case 8:n=9,e=this.xmin,o=this.ymax;break;case 9:n=1;continue;case 1:n=5,e=this.xmin,o=this.ymin}r[i]===e&&r[i+1]===o||!this.contains(t,e,o)||(r.splice(i,0,e,o),i+=2)}if(r.length>4)for(let t=0;t<r.length;t+=2){const n=(t+2)%r.length,e=(t+4)%r.length;(r[t]===r[n]&&r[n]===r[e]||r[t+1]===r[n+1]&&r[n+1]===r[e+1])&&(r.splice(n,2),t-=2)}return i}_project(t,n,e,r){let i,o,a,f=1/0;if(r<0){if(n<=this.ymin)return null;(i=(this.ymin-n)/r)<f&&(a=this.ymin,o=t+(f=i)*e)}else if(r>0){if(n>=this.ymax)return null;(i=(this.ymax-n)/r)<f&&(a=this.ymax,o=t+(f=i)*e)}if(e>0){if(t>=this.xmax)return null;(i=(this.xmax-t)/e)<f&&(o=this.xmax,a=n+(f=i)*r)}else if(e<0){if(t<=this.xmin)return null;(i=(this.xmin-t)/e)<f&&(o=this.xmin,a=n+(f=i)*r)}return[o,a]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}}const Yn=2*Math.PI,Qn=Math.pow;function te(t){return t[0]}function ne(t){return t[1]}function ee(t,n,e){return[t+Math.sin(t+n)*e,n+Math.cos(t-n)*e]}class re{static from(t,n=te,e=ne,r){return new re("length"in t?function(t,n,e,r){const i=t.length,o=new Float64Array(2*i);for(let a=0;a<i;++a){const i=t[a];o[2*a]=n.call(r,i,a,t),o[2*a+1]=e.call(r,i,a,t)}return o}(t,n,e,r):Float64Array.from(function*(t,n,e,r){let i=0;for(const o of t)yield n.call(r,o,i,t),yield e.call(r,o,i,t),++i}(t,n,e,r)))}constructor(t){this._delaunator=new On(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&function(t){const{triangles:n,coords:e}=t;for(let t=0;t<n.length;t+=3){const r=2*n[t],i=2*n[t+1],o=2*n[t+2];if((e[o]-e[r])*(e[i+1]-e[r+1])-(e[i]-e[r])*(e[o+1]-e[r+1])>1e-10)return!1}return!0}(t)){this.collinear=Int32Array.from({length:n.length/2},((t,n)=>n)).sort(((t,e)=>n[2*t]-n[2*e]||n[2*t+1]-n[2*e+1]));const t=this.collinear[0],e=this.collinear[this.collinear.length-1],r=[n[2*t],n[2*t+1],n[2*e],n[2*e+1]],i=1e-8*Math.hypot(r[3]-r[1],r[2]-r[0]);for(let t=0,e=n.length/2;t<e;++t){const e=ee(n[2*t],n[2*t+1],i);n[2*t]=e[0],n[2*t+1]=e[1]}this._delaunator=new On(n)}else delete this.collinear;const e=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,i=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let t=0,n=e.length;t<n;++t){const n=i[t%3==2?t-2:t+1];-1!==e[t]&&-1!==o[n]||(o[n]=t)}for(let t=0,n=r.length;t<n;++t)a[r[t]]=t;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],this.triangles[1]=r[1],this.triangles[2]=r[1],o[r[0]]=1,2===r.length&&(o[r[1]]=0))}voronoi(t){return new Xn(this,t)}*neighbors(t){const{inedges:n,hull:e,_hullIndex:r,halfedges:i,triangles:o,collinear:a}=this;if(a){const n=a.indexOf(t);return n>0&&(yield a[n-1]),void(n<a.length-1&&(yield a[n+1]))}const f=n[t];if(-1===f)return;let u=f,s=-1;do{if(yield s=o[u],u=u%3==2?u-2:u+1,o[u]!==t)return;if(u=i[u],-1===u){const n=e[(r[t]+1)%e.length];return void(n!==s&&(yield n))}}while(u!==f)}find(t,n,e=0){if((t=+t)!=t||(n=+n)!=n)return-1;const r=e;let i;for(;(i=this._step(e,t,n))>=0&&i!==e&&i!==r;)e=i;return i}_step(t,n,e){const{inedges:r,hull:i,_hullIndex:o,halfedges:a,triangles:f,points:u}=this;if(-1===r[t]||!u.length)return(t+1)%(u.length>>1);let s=t,c=Qn(n-u[2*t],2)+Qn(e-u[2*t+1],2);const l=r[t];let h=l;do{let r=f[h];const l=Qn(n-u[2*r],2)+Qn(e-u[2*r+1],2);if(l<c&&(c=l,s=r),h=h%3==2?h-2:h+1,f[h]!==t)break;if(h=a[h],-1===h){if(h=i[(o[t]+1)%i.length],h!==r&&Qn(n-u[2*h],2)+Qn(e-u[2*h+1],2)<c)return h;break}}while(h!==l);return s}render(t){const n=null==t?t=new Vn:void 0,{points:e,halfedges:r,triangles:i}=this;for(let n=0,o=r.length;n<o;++n){const o=r[n];if(o<n)continue;const a=2*i[n],f=2*i[o];t.moveTo(e[a],e[a+1]),t.lineTo(e[f],e[f+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n=2){const e=null==t?t=new Vn:void 0,{points:r}=this;for(let e=0,i=r.length;e<i;e+=2){const i=r[e],o=r[e+1];t.moveTo(i+n,o),t.arc(i,o,n,0,Yn)}return e&&e.value()}renderHull(t){const n=null==t?t=new Vn:void 0,{hull:e,points:r}=this,i=2*e[0],o=e.length;t.moveTo(r[i],r[i+1]);for(let n=1;n<o;++n){const i=2*e[n];t.lineTo(r[i],r[i+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new Wn;return this.renderHull(t),t.value()}renderTriangle(t,n){const e=null==n?n=new Vn:void 0,{points:r,triangles:i}=this,o=2*i[t*=3],a=2*i[t+1],f=2*i[t+2];return n.moveTo(r[o],r[o+1]),n.lineTo(r[a],r[a+1]),n.lineTo(r[f],r[f+1]),n.closePath(),e&&e.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,e=t.length/3;n<e;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new Wn;return this.renderTriangle(t,n),n.value()}}function ie(){return new oe}function oe(){this.reset()}oe.prototype={constructor:oe,reset:function(){this.s=this.t=0},add:function(t){fe(ae,t,this.t),fe(this,ae.s,this.s),this.s?this.t+=ae.t:this.s=ae.t},valueOf:function(){return this.s}};var ae=new oe;function fe(t,n,e){var r=t.s=n+e,i=r-n,o=r-i;t.t=n-o+(e-i)}var ue=1e-6,se=Math.PI,ce=se/2,le=se/4,he=2*se,de=180/se,pe=se/180,ge=Math.abs,ye=Math.atan,be=Math.atan2,ve=Math.cos,xe=Math.sin,me=Math.sign||function(t){return t>0?1:t<0?-1:0},_e=Math.sqrt;function we(t){return t>1?ce:t<-1?-ce:Math.asin(t)}function Me(){}function Se(t,n){t&&Ue.hasOwnProperty(t.type)&&Ue[t.type](t,n)}var Ee,ke,Ne,Ae,Pe,Te,ze,je,Fe,Ie,Le,$e,Ze,Oe,qe,He,Re={Feature:function(t,n){Se(t.geometry,n)},FeatureCollection:function(t,n){for(var e=t.features,r=-1,i=e.length;++r<i;)Se(e[r].geometry,n)}},Ue={Sphere:function(t,n){n.sphere()},Point:function(t,n){t=t.coordinates,n.point(t[0],t[1],t[2])},MultiPoint:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)t=e[r],n.point(t[0],t[1],t[2])},LineString:function(t,n){Ce(t.coordinates,n,0)},MultiLineString:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Ce(e[r],n,0)},Polygon:function(t,n){Be(t.coordinates,n)},MultiPolygon:function(t,n){for(var e=t.coordinates,r=-1,i=e.length;++r<i;)Be(e[r],n)},GeometryCollection:function(t,n){for(var e=t.geometries,r=-1,i=e.length;++r<i;)Se(e[r],n)}};function Ce(t,n,e){var r,i=-1,o=t.length-e;for(n.lineStart();++i<o;)r=t[i],n.point(r[0],r[1],r[2]);n.lineEnd()}function Be(t,n){var e=-1,r=t.length;for(n.polygonStart();++e<r;)Ce(t[e],n,1);n.polygonEnd()}function Ke(t,n){t&&Re.hasOwnProperty(t.type)?Re[t.type](t,n):Se(t,n)}function Ge(t){return[be(t[1],t[0]),we(t[2])]}function Je(t){var n=t[0],e=t[1],r=ve(e);return[r*ve(n),r*xe(n),xe(e)]}function De(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Ve(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function We(t,n){t[0]+=n[0],t[1]+=n[1],t[2]+=n[2]}function Xe(t,n){return[t[0]*n,t[1]*n,t[2]*n]}function Ye(t){var n=_e(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=n,t[1]/=n,t[2]/=n}var Qe={sphere:Me,point:tr,lineStart:er,lineEnd:or,polygonStart:function(){Qe.lineStart=ar,Qe.lineEnd=fr},polygonEnd:function(){Qe.lineStart=er,Qe.lineEnd=or}};function tr(t,n){t*=pe;var e=ve(n*=pe);nr(e*ve(t),e*xe(t),xe(n))}function nr(t,n,e){++Ee,Ne+=(t-Ne)/Ee,Ae+=(n-Ae)/Ee,Pe+=(e-Pe)/Ee}function er(){Qe.point=rr}function rr(t,n){t*=pe;var e=ve(n*=pe);Oe=e*ve(t),qe=e*xe(t),He=xe(n),Qe.point=ir,nr(Oe,qe,He)}function ir(t,n){t*=pe;var e=ve(n*=pe),r=e*ve(t),i=e*xe(t),o=xe(n),a=be(_e((a=qe*o-He*i)*a+(a=He*r-Oe*o)*a+(a=Oe*i-qe*r)*a),Oe*r+qe*i+He*o);ke+=a,Te+=a*(Oe+(Oe=r)),ze+=a*(qe+(qe=i)),je+=a*(He+(He=o)),nr(Oe,qe,He)}function or(){Qe.point=tr}function ar(){Qe.point=ur}function fr(){sr($e,Ze),Qe.point=tr}function ur(t,n){$e=t,Ze=n,t*=pe,n*=pe,Qe.point=sr;var e=ve(n);Oe=e*ve(t),qe=e*xe(t),He=xe(n),nr(Oe,qe,He)}function sr(t,n){t*=pe;var e=ve(n*=pe),r=e*ve(t),i=e*xe(t),o=xe(n),a=qe*o-He*i,f=He*r-Oe*o,u=Oe*i-qe*r,s=_e(a*a+f*f+u*u),c=we(s),l=s&&-c/s;Fe+=l*a,Ie+=l*f,Le+=l*u,ke+=c,Te+=c*(Oe+(Oe=r)),ze+=c*(qe+(qe=i)),je+=c*(He+(He=o)),nr(Oe,qe,He)}function cr(t){Ee=ke=Ne=Ae=Pe=Te=ze=je=Fe=Ie=Le=0,Ke(t,Qe);var n=Fe,e=Ie,r=Le,i=n*n+e*e+r*r;return i<1e-12&&(n=Te,e=ze,r=je,ke<ue&&(n=Ne,e=Ae,r=Pe),(i=n*n+e*e+r*r)<1e-12)?[NaN,NaN]:[be(e,n)*de,we(r/_e(i))*de]}function lr(t,n){function e(e,r){return e=t(e,r),n(e[0],e[1])}return t.invert&&n.invert&&(e.invert=function(e,r){return(e=n.invert(e,r))&&t.invert(e[0],e[1])}),e}function hr(t,n){return[ge(t)>se?t+Math.round(-t/he)*he:t,n]}function dr(t,n,e){return(t%=he)?n||e?lr(gr(t),yr(n,e)):gr(t):n||e?yr(n,e):hr}function pr(t){return function(n,e){return[(n+=t)>se?n-he:n<-se?n+he:n,e]}}function gr(t){var n=pr(t);return n.invert=pr(-t),n}function yr(t,n){var e=ve(t),r=xe(t),i=ve(n),o=xe(n);function a(t,n){var a=ve(n),f=ve(t)*a,u=xe(t)*a,s=xe(n),c=s*e+f*r;return[be(u*i-c*o,f*e-s*r),we(c*i+u*o)]}return a.invert=function(t,n){var a=ve(n),f=ve(t)*a,u=xe(t)*a,s=xe(n),c=s*i-u*o;return[be(u*i+s*o,f*e+c*r),we(c*e-f*r)]},a}function br(t,n){(n=Je(n))[0]-=t,Ye(n);var e,r=(e=-n[1])>1?0:e<-1?se:Math.acos(e);return((-n[2]<0?-r:r)+he-ue)%he}function vr(){var t,n=[];return{point:function(n,e,r){t.push([n,e,r])},lineStart:function(){n.push(t=[])},lineEnd:Me,rejoin:function(){n.length>1&&n.push(n.pop().concat(n.shift()))},result:function(){var e=n;return n=[],t=null,e}}}function xr(t,n){return ge(t[0]-n[0])<ue&&ge(t[1]-n[1])<ue}function mr(t,n,e,r){this.x=t,this.z=n,this.o=e,this.e=r,this.v=!1,this.n=this.p=null}function _r(t,n,e,r,i){var o,a,f=[],u=[];if(t.forEach((function(t){if(!((n=t.length-1)<=0)){var n,e,r=t[0],a=t[n];if(xr(r,a)){if(!r[2]&&!a[2]){for(i.lineStart(),o=0;o<n;++o)i.point((r=t[o])[0],r[1]);return void i.lineEnd()}a[0]+=2e-6}f.push(e=new mr(r,t,null,!0)),u.push(e.o=new mr(r,null,e,!1)),f.push(e=new mr(a,t,null,!1)),u.push(e.o=new mr(a,null,e,!0))}})),f.length){for(u.sort(n),wr(f),wr(u),o=0,a=u.length;o<a;++o)u[o].e=e=!e;for(var s,c,l=f[0];;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;s=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(o=0,a=s.length;o<a;++o)i.point((c=s[o])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(s=h.p.z,o=s.length-1;o>=0;--o)i.point((c=s[o])[0],c[1]);else r(h.x,h.p.x,-1,i);h=h.p}s=(h=h.o).z,d=!d}while(!h.v);i.lineEnd()}}}function wr(t){if(n=t.length){for(var n,e,r=0,i=t[0];++r<n;)i.n=e=t[r],e.p=i,i=e;i.n=e=t[0],e.p=i}}hr.invert=hr;var Mr,Sr,Er=ie();function kr(t){return ge(t[0])<=se?t[0]:me(t[0])*((ge(t[0])+se)%he-se)}function Nr(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}function Ar(t){for(var n,e,r,i=t.length,o=-1,a=0;++o<i;)a+=t[o].length;for(e=new Array(a);--i>=0;)for(n=(r=t[i]).length;--n>=0;)e[--a]=r[n];return e}function Pr(t,n,e,r){return function(i){var o,a,f,u=n(i),s=vr(),c=n(s),l=!1,h={point:d,lineStart:g,lineEnd:y,polygonStart:function(){h.point=b,h.lineStart=v,h.lineEnd=x,a=[],o=[]},polygonEnd:function(){h.point=d,h.lineStart=g,h.lineEnd=y,a=Ar(a);var t=function(t,n){var e=kr(n),r=n[1],i=xe(r),o=[xe(e),-ve(e),0],a=0,f=0;Er.reset(),1===i?r=ce+ue:-1===i&&(r=-ce-ue);for(var u=0,s=t.length;u<s;++u)if(l=(c=t[u]).length)for(var c,l,h=c[l-1],d=kr(h),p=h[1]/2+le,g=xe(p),y=ve(p),b=0;b<l;++b,d=x,g=_,y=w,h=v){var v=c[b],x=kr(v),m=v[1]/2+le,_=xe(m),w=ve(m),M=x-d,S=M>=0?1:-1,E=S*M,k=E>se,N=g*_;if(Er.add(be(N*S*xe(E),y*w+N*ve(E))),a+=k?M+S*he:M,k^d>=e^x>=e){var A=Ve(Je(h),Je(v));Ye(A);var P=Ve(o,A);Ye(P);var T=(k^M>=0?-1:1)*we(P[2]);(r>T||r===T&&(A[0]||A[1]))&&(f+=k^M>=0?1:-1)}}return(a<-ue||a<ue&&Er<-ue)^1&f}(o,r);a.length?(l||(i.polygonStart(),l=!0),_r(a,zr,t,e,i)):t&&(l||(i.polygonStart(),l=!0),i.lineStart(),e(null,null,1,i),i.lineEnd()),l&&(i.polygonEnd(),l=!1),a=o=null},sphere:function(){i.polygonStart(),i.lineStart(),e(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function d(n,e){t(n,e)&&i.point(n,e)}function p(t,n){u.point(t,n)}function g(){h.point=p,u.lineStart()}function y(){h.point=d,u.lineEnd()}function b(t,n){f.push([t,n]),c.point(t,n)}function v(){c.lineStart(),f=[]}function x(){b(f[0][0],f[0][1]),c.lineEnd();var t,n,e,r,u=c.clean(),h=s.result(),d=h.length;if(f.pop(),o.push(f),f=null,d)if(1&u){if((n=(e=h[0]).length-1)>0){for(l||(i.polygonStart(),l=!0),i.lineStart(),t=0;t<n;++t)i.point((r=e[t])[0],r[1]);i.lineEnd()}}else d>1&&2&u&&h.push(h.pop().concat(h.shift())),a.push(h.filter(Tr))}return h}}function Tr(t){return t.length>1}function zr(t,n){return((t=t.x)[0]<0?t[1]-ce-ue:ce-t[1])-((n=n.x)[0]<0?n[1]-ce-ue:ce-n[1])}1===(Mr=Nr).length&&(Sr=Mr,Mr=function(t,n){return Nr(Sr(t),n)});var jr=Pr((function(){return!0}),(function(t){var n,e=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),n=1},point:function(o,a){var f=o>0?se:-se,u=ge(o-e);ge(u-se)<ue?(t.point(e,r=(r+a)/2>0?ce:-ce),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(f,r),t.point(o,r),n=0):i!==f&&u>=se&&(ge(e-i)<ue&&(e-=i*ue),ge(o-f)<ue&&(o-=f*ue),r=function(t,n,e,r){var i,o,a=xe(t-e);return ge(a)>ue?ye((xe(n)*(o=ve(r))*xe(e)-xe(r)*(i=ve(n))*xe(t))/(i*o*a)):(n+r)/2}(e,r,o,a),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(f,r),n=0),t.point(e=o,r=a),i=f},lineEnd:function(){t.lineEnd(),e=r=NaN},clean:function(){return 2-n}}}),(function(t,n,e,r){var i;if(null==t)i=e*ce,r.point(-se,i),r.point(0,i),r.point(se,i),r.point(se,0),r.point(se,-i),r.point(0,-i),r.point(-se,-i),r.point(-se,0),r.point(-se,i);else if(ge(t[0]-n[0])>ue){var o=t[0]<n[0]?se:-se;i=e*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(n[0],n[1])}),[-se,-ce]);function Fr(t){var n=ve(t),e=6*pe,r=n>0,i=ge(n)>ue;function o(t,e){return ve(t)*ve(e)>n}function a(t,e,r){var i=[1,0,0],o=Ve(Je(t),Je(e)),a=De(o,o),f=o[0],u=a-f*f;if(!u)return!r&&t;var s=n*a/u,c=-n*f/u,l=Ve(i,o),h=Xe(i,s);We(h,Xe(o,c));var d=l,p=De(h,d),g=De(d,d),y=p*p-g*(De(h,h)-1);if(!(y<0)){var b=_e(y),v=Xe(d,(-p-b)/g);if(We(v,h),v=Ge(v),!r)return v;var x,m=t[0],_=e[0],w=t[1],M=e[1];_<m&&(x=m,m=_,_=x);var S=_-m,E=ge(S-se)<ue;if(!E&&M<w&&(x=w,w=M,M=x),E||S<ue?E?w+M>0^v[1]<(ge(v[0]-m)<ue?w:M):w<=v[1]&&v[1]<=M:S>se^(m<=v[0]&&v[0]<=_)){var k=Xe(d,(-p+b)/g);return We(k,h),[v,Ge(k)]}}}function f(n,e){var i=r?t:se-t,o=0;return n<-i?o|=1:n>i&&(o|=2),e<-i?o|=4:e>i&&(o|=8),o}return Pr(o,(function(t){var n,e,u,s,c;return{lineStart:function(){s=u=!1,c=1},point:function(l,h){var d,p=[l,h],g=o(l,h),y=r?g?0:f(l,h):g?f(l+(l<0?se:-se),h):0;if(!n&&(s=u=g)&&t.lineStart(),g!==u&&(!(d=a(n,p))||xr(n,d)||xr(p,d))&&(p[2]=1),g!==u)c=0,g?(t.lineStart(),d=a(p,n),t.point(d[0],d[1])):(d=a(n,p),t.point(d[0],d[1],2),t.lineEnd()),n=d;else if(i&&n&&r^g){var b;y&e||!(b=a(p,n,!0))||(c=0,r?(t.lineStart(),t.point(b[0][0],b[0][1]),t.point(b[1][0],b[1][1]),t.lineEnd()):(t.point(b[1][0],b[1][1]),t.lineEnd(),t.lineStart(),t.point(b[0][0],b[0][1],3)))}!g||n&&xr(n,p)||t.point(p[0],p[1]),n=p,u=g,e=y},lineEnd:function(){u&&t.lineEnd(),n=null},clean:function(){return c|(s&&u)<<1}}}),(function(n,r,i,o){!function(t,n,e,r,i,o){if(e){var a=ve(n),f=xe(n),u=r*e;null==i?(i=n+r*he,o=n-u/2):(i=br(a,i),o=br(a,o),(r>0?i<o:i>o)&&(i+=r*he));for(var s,c=i;r>0?c>o:c<o;c-=u)s=Ge([a,-f*ve(c),-f*xe(c)]),t.point(s[0],s[1])}}(o,t,e,i,n,r)}),r?[0,-t]:[-se,t-se])}var Ir=1e9,Lr=-Ir;function $r(t,n,e,r){function i(i,o){return t<=i&&i<=e&&n<=o&&o<=r}function o(i,o,f,s){var c=0,l=0;if(null==i||(c=a(i,f))!==(l=a(o,f))||u(i,o)<0^f>0)do{s.point(0===c||3===c?t:e,c>1?r:n)}while((c=(c+f+4)%4)!==l);else s.point(o[0],o[1])}function a(r,i){return ge(r[0]-t)<ue?i>0?0:3:ge(r[0]-e)<ue?i>0?2:1:ge(r[1]-n)<ue?i>0?1:0:i>0?3:2}function f(t,n){return u(t.x,n.x)}function u(t,n){var e=a(t,1),r=a(n,1);return e!==r?e-r:0===e?n[1]-t[1]:1===e?t[0]-n[0]:2===e?t[1]-n[1]:n[0]-t[0]}return function(a){var u,s,c,l,h,d,p,g,y,b,v,x=a,m=vr(),_={point:w,lineStart:function(){_.point=M,s&&s.push(c=[]);b=!0,y=!1,p=g=NaN},lineEnd:function(){u&&(M(l,h),d&&y&&m.rejoin(),u.push(m.result()));_.point=w,y&&x.lineEnd()},polygonStart:function(){x=m,u=[],s=[],v=!0},polygonEnd:function(){var n=function(){for(var n=0,e=0,i=s.length;e<i;++e)for(var o,a,f=s[e],u=1,c=f.length,l=f[0],h=l[0],d=l[1];u<c;++u)o=h,a=d,h=(l=f[u])[0],d=l[1],a<=r?d>r&&(h-o)*(r-a)>(d-a)*(t-o)&&++n:d<=r&&(h-o)*(r-a)<(d-a)*(t-o)&&--n;return n}(),e=v&&n,i=(u=Ar(u)).length;(e||i)&&(a.polygonStart(),e&&(a.lineStart(),o(null,null,1,a),a.lineEnd()),i&&_r(u,f,n,o,a),a.polygonEnd());x=a,u=s=c=null}};function w(t,n){i(t,n)&&x.point(t,n)}function M(o,a){var f=i(o,a);if(s&&c.push([o,a]),b)l=o,h=a,d=f,b=!1,f&&(x.lineStart(),x.point(o,a));else if(f&&y)x.point(o,a);else{var u=[p=Math.max(Lr,Math.min(Ir,p)),g=Math.max(Lr,Math.min(Ir,g))],m=[o=Math.max(Lr,Math.min(Ir,o)),a=Math.max(Lr,Math.min(Ir,a))];!function(t,n,e,r,i,o){var a,f=t[0],u=t[1],s=0,c=1,l=n[0]-f,h=n[1]-u;if(a=e-f,l||!(a>0)){if(a/=l,l<0){if(a<s)return;a<c&&(c=a)}else if(l>0){if(a>c)return;a>s&&(s=a)}if(a=i-f,l||!(a<0)){if(a/=l,l<0){if(a>c)return;a>s&&(s=a)}else if(l>0){if(a<s)return;a<c&&(c=a)}if(a=r-u,h||!(a>0)){if(a/=h,h<0){if(a<s)return;a<c&&(c=a)}else if(h>0){if(a>c)return;a>s&&(s=a)}if(a=o-u,h||!(a<0)){if(a/=h,h<0){if(a>c)return;a>s&&(s=a)}else if(h>0){if(a<s)return;a<c&&(c=a)}return s>0&&(t[0]=f+s*l,t[1]=u+s*h),c<1&&(n[0]=f+c*l,n[1]=u+c*h),!0}}}}}(u,m,t,n,e,r)?f&&(x.lineStart(),x.point(o,a),v=!1):(y||(x.lineStart(),x.point(u[0],u[1])),x.point(m[0],m[1]),f||x.lineEnd(),v=!1)}p=o,g=a,y=f}return _}}var Zr,Or,qr,Hr=ie(),Rr={sphere:Me,point:Me,lineStart:function(){Rr.point=Cr,Rr.lineEnd=Ur},lineEnd:Me,polygonStart:Me,polygonEnd:Me};function Ur(){Rr.point=Rr.lineEnd=Me}function Cr(t,n){Zr=t*=pe,Or=xe(n*=pe),qr=ve(n),Rr.point=Br}function Br(t,n){t*=pe;var e=xe(n*=pe),r=ve(n),i=ge(t-Zr),o=ve(i),a=r*xe(i),f=qr*e-Or*r*o,u=Or*e+qr*r*o;Hr.add(be(_e(a*a+f*f),u)),Zr=t,Or=e,qr=r}var Kr=[null,null],Gr={type:"LineString",coordinates:Kr};function Jr(t,n){return Kr[0]=t,Kr[1]=n,function(t){return Hr.reset(),Ke(t,Rr),+Hr}(Gr)}function Dr(t){return t}var Vr=1/0,Wr=Vr,Xr=-Vr,Yr=Xr;var Qr={point:function(t,n){t<Vr&&(Vr=t);t>Xr&&(Xr=t);n<Wr&&(Wr=n);n>Yr&&(Yr=n)},lineStart:Me,lineEnd:Me,polygonStart:Me,polygonEnd:Me,result:function(){var t=[[Vr,Wr],[Xr,Yr]];return Xr=Yr=-(Wr=Vr=1/0),t}};function ti(t){return function(n){var e=new ni;for(var r in t)e[r]=t[r];return e.stream=n,e}}function ni(){}function ei(t,n,e){var r=t.clipExtent&&t.clipExtent();return t.scale(150).translate([0,0]),null!=r&&t.clipExtent(null),Ke(e,t.stream(Qr)),n(Qr.result()),null!=r&&t.clipExtent(r),t}function ri(t,n,e){return ei(t,(function(e){var r=n[1][0]-n[0][0],i=n[1][1]-n[0][1],o=Math.min(r/(e[1][0]-e[0][0]),i/(e[1][1]-e[0][1])),a=+n[0][0]+(r-o*(e[1][0]+e[0][0]))/2,f=+n[0][1]+(i-o*(e[1][1]+e[0][1]))/2;t.scale(150*o).translate([a,f])}),e)}ni.prototype={constructor:ni,point:function(t,n){this.stream.point(t,n)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var ii=ve(30*pe);function oi(t,n){return+n?function(t,n){function e(r,i,o,a,f,u,s,c,l,h,d,p,g,y){var b=s-r,v=c-i,x=b*b+v*v;if(x>4*n&&g--){var m=a+h,_=f+d,w=u+p,M=_e(m*m+_*_+w*w),S=we(w/=M),E=ge(ge(w)-1)<ue||ge(o-l)<ue?(o+l)/2:be(_,m),k=t(E,S),N=k[0],A=k[1],P=N-r,T=A-i,z=v*P-b*T;(z*z/x>n||ge((b*P+v*T)/x-.5)>.3||a*h+f*d+u*p<ii)&&(e(r,i,o,a,f,u,N,A,E,m/=M,_/=M,w,g,y),y.point(N,A),e(N,A,E,m,_,w,s,c,l,h,d,p,g,y))}}return function(n){var r,i,o,a,f,u,s,c,l,h,d,p,g={point:y,lineStart:b,lineEnd:x,polygonStart:function(){n.polygonStart(),g.lineStart=m},polygonEnd:function(){n.polygonEnd(),g.lineStart=b}};function y(e,r){e=t(e,r),n.point(e[0],e[1])}function b(){c=NaN,g.point=v,n.lineStart()}function v(r,i){var o=Je([r,i]),a=t(r,i);e(c,l,s,h,d,p,c=a[0],l=a[1],s=r,h=o[0],d=o[1],p=o[2],16,n),n.point(c,l)}function x(){g.point=y,n.lineEnd()}function m(){b(),g.point=_,g.lineEnd=w}function _(t,n){v(r=t,n),i=c,o=l,a=h,f=d,u=p,g.point=v}function w(){e(c,l,s,h,d,p,i,o,r,a,f,u,16,n),g.lineEnd=x,x()}return g}}(t,n):function(t){return ti({point:function(n,e){n=t(n,e),this.stream.point(n[0],n[1])}})}(t)}var ai=ti({point:function(t,n){this.stream.point(t*pe,n*pe)}});function fi(t,n,e,r,i){function o(o,a){return[n+t*(o*=r),e-t*(a*=i)]}return o.invert=function(o,a){return[(o-n)/t*r,(e-a)/t*i]},o}function ui(t,n,e,r,i,o){var a=ve(o),f=xe(o),u=a*t,s=f*t,c=a/t,l=f/t,h=(f*e-a*n)/t,d=(f*n+a*e)/t;function p(t,o){return[u*(t*=r)-s*(o*=i)+n,e-s*t-u*o]}return p.invert=function(t,n){return[r*(c*t-l*n+h),i*(d-l*t-c*n)]},p}function si(t){return function(t){var n,e,r,i,o,a,f,u,s,c,l=150,h=480,d=250,p=0,g=0,y=0,b=0,v=0,x=0,m=1,_=1,w=null,M=jr,S=null,E=Dr,k=.5;function N(t){return u(t[0]*pe,t[1]*pe)}function A(t){return(t=u.invert(t[0],t[1]))&&[t[0]*de,t[1]*de]}function P(){var t=ui(l,0,0,m,_,x).apply(null,n(p,g)),r=(x?ui:fi)(l,h-t[0],d-t[1],m,_,x);return e=dr(y,b,v),f=lr(n,r),u=lr(e,f),a=oi(f,k),T()}function T(){return s=c=null,N}return N.stream=function(t){return s&&c===t?s:s=ai(function(t){return ti({point:function(n,e){var r=t(n,e);return this.stream.point(r[0],r[1])}})}(e)(M(a(E(c=t)))))},N.preclip=function(t){return arguments.length?(M=t,w=void 0,T()):M},N.postclip=function(t){return arguments.length?(E=t,S=r=i=o=null,T()):E},N.clipAngle=function(t){return arguments.length?(M=+t?Fr(w=t*pe):(w=null,jr),T()):w*de},N.clipExtent=function(t){return arguments.length?(E=null==t?(S=r=i=o=null,Dr):$r(S=+t[0][0],r=+t[0][1],i=+t[1][0],o=+t[1][1]),T()):null==S?null:[[S,r],[i,o]]},N.scale=function(t){return arguments.length?(l=+t,P()):l},N.translate=function(t){return arguments.length?(h=+t[0],d=+t[1],P()):[h,d]},N.center=function(t){return arguments.length?(p=t[0]%360*pe,g=t[1]%360*pe,P()):[p*de,g*de]},N.rotate=function(t){return arguments.length?(y=t[0]%360*pe,b=t[1]%360*pe,v=t.length>2?t[2]%360*pe:0,P()):[y*de,b*de,v*de]},N.angle=function(t){return arguments.length?(x=t%360*pe,P()):x*de},N.reflectX=function(t){return arguments.length?(m=t?-1:1,P()):m<0},N.reflectY=function(t){return arguments.length?(_=t?-1:1,P()):_<0},N.precision=function(t){return arguments.length?(a=oi(f,k=t*t),T()):_e(k)},N.fitExtent=function(t,n){return ri(N,t,n)},N.fitSize=function(t,n){return function(t,n,e){return ri(t,[[0,0],n],e)}(N,t,n)},N.fitWidth=function(t,n){return function(t,n,e){return ei(t,(function(e){var r=+n,i=r/(e[1][0]-e[0][0]),o=(r-i*(e[1][0]+e[0][0]))/2,a=-i*e[0][1];t.scale(150*i).translate([o,a])}),e)}(N,t,n)},N.fitHeight=function(t,n){return function(t,n,e){return ei(t,(function(e){var r=+n,i=r/(e[1][1]-e[0][1]),o=-i*e[0][0],a=(r-i*(e[1][1]+e[0][1]))/2;t.scale(150*i).translate([o,a])}),e)}(N,t,n)},function(){return n=t.apply(this,arguments),N.invert=n.invert&&A,P()}}((function(){return t}))()}function ci(t,n){var e=ve(n),r=1+ve(t)*e;return[e*xe(t)/r,xe(n)/r]}function li(){return si(ci).scale(250).clipAngle(142)}function hi(t,n){let e,r;if(void 0===n)for(const n of t)null!=n&&(void 0===e?n>=n&&(e=r=n):(e>n&&(e=n),r<n&&(r=n)));else{let i=-1;for(let o of t)null!=(o=n(o,++i,t))&&(void 0===e?o>=o&&(e=r=o):(e>o&&(e=o),r<o&&(r=o)))}return[e,r]}ci.invert=function(t){return function(n,e){var r=_e(n*n+e*e),i=t(r),o=xe(i),a=ve(i);return[be(n*o,r*a),we(r&&e*o/r)]}}((function(t){return 2*ye(t)}));var di=Math.PI,pi=di/2,gi=180/di,yi=di/180,bi=Math.atan2,vi=Math.cos,xi=Math.max,mi=Math.min,_i=Math.sin,wi=Math.sign||function(t){return t>0?1:t<0?-1:0},Mi=Math.sqrt;function Si(t,n){return t[0]*n[0]+t[1]*n[1]+t[2]*n[2]}function Ei(t,n){return[t[1]*n[2]-t[2]*n[1],t[2]*n[0]-t[0]*n[2],t[0]*n[1]-t[1]*n[0]]}function ki(t,n){return[t[0]+n[0],t[1]+n[1],t[2]+n[2]]}function Ni(t){var n=Mi(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return[t[0]/n,t[1]/n,t[2]/n]}function Ai(t){return[bi(t[1],t[0])*gi,(n=xi(-1,mi(1,t[2])),(n>1?pi:n<-1?-pi:Math.asin(n))*gi)];var n}function Pi(t){var n=t[0]*yi,e=t[1]*yi,r=vi(e);return[r*vi(n),r*_i(n),_i(e)]}function Ti(t){return Si((t=t.map((t=>Pi(t))))[0],Ei(t[2],t[1]))}function zi(t){const n=function(t){if(t.length<2)return{};let n=0;for(;isNaN(t[n][0]+t[n][1])&&n++<t.length;);const e=function(t){function n(n){return(n=t(n[0]*pe,n[1]*pe))[0]*=de,n[1]*=de,n}return t=dr(t[0]*pe,t[1]*pe,t.length>2?t[2]*pe:0),n.invert=function(n){return(n=t.invert(n[0]*pe,n[1]*pe))[0]*=de,n[1]*=de,n},n}(t[n]),r=li().translate([0,0]).scale(1).rotate(e.invert([180,0]));t=t.map(r);const i=[];let o=1;for(let n=0,e=t.length;n<e;n++){let e=t[n][0]**2+t[n][1]**2;!isFinite(e)||e>1e32?i.push(n):e>o&&(o=e)}const a=1e6*Mi(o);i.forEach((n=>t[n]=[a,0])),t.push([0,a]),t.push([-a,0]),t.push([0,-a]);const f=re.from(t);f.projection=r;const{triangles:u,halfedges:s,inedges:c}=f;for(let e=0,r=s.length;e<r;e++)if(s[e]<0){const t=e%3==2?e-2:e+1,r=e%3==0?e+2:e-1,i=s[t],o=s[r];s[i]=o,s[o]=i,s[t]=s[r]=-1,u[e]=u[t]=u[r]=n,c[u[i]]=i%3==0?i+2:i-1,c[u[o]]=o%3==0?o+2:o-1,e+=2-e%3}else u[e]>t.length-3-1&&(u[e]=n);return f}(t),e=function(t){const{triangles:n}=t;if(!n)return[];const e=[];for(let t=0,r=n.length/3;t<r;t++){const r=n[3*t],i=n[3*t+1],o=n[3*t+2];r!==i&&i!==o&&e.push([r,o,i])}return e}(n),r=function(t,n){const e={};return 2===n.length?[[0,1]]:(t.forEach((t=>{if(t[0]!==t[1]&&!(Ti(t.map((t=>n[t])))<0))for(let n,r=0;r<3;r++)n=(r+1)%3,e[hi([t[r],t[n]]).join("-")]=!0})),Object.keys(e).map((t=>t.split("-").map(Number))))}(e,t),i=function(t,n){const e=[];t.forEach(((t,n)=>{for(let n=0;n<3;n++){const r=t[n],i=t[(n+1)%3];t[(n+2)%3],e[r]=e[r]||[],e[r].push(i)}})),0===t.length&&(2===n?(e[0]=[1],e[1]=[0]):1===n&&(e[0]=[]));return e}(e,t.length),o=function(t,n){function e(t,n){let e=t[0]-n[0],r=t[1]-n[1],i=t[2]-n[2];return e*e+r*r+i*i}return function(r,i,o){void 0===o&&(o=0);let a,f,u=o;const s=Pi([r,i]);do{a=o,o=null,f=e(s,Pi(n[a])),t[a].forEach((t=>{let r=e(s,Pi(n[t]));if(r<f)return f=r,o=t,void(u=t)}))}while(null!==o);return u}}(i,t),a=function(t,n){return t.map((t=>{const e=t.map((t=>n[t])).map(Pi);return Ai(Ni(ki(ki(Ei(e[1],e[0]),Ei(e[2],e[1])),Ei(e[0],e[2]))))}))}(e,t),{polygons:f,centers:u}=function(t,n,e){const r=[],i=t.slice();if(0===n.length){if(e.length<2)return{polygons:r,centers:i};if(2===e.length){const t=Pi(e[0]),n=Pi(e[1]),a=Ni(ki(t,n)),f=Ni(Ei(t,n)),u=Ei(a,f),s=[a,Ei(a,u),Ei(Ei(a,u),u),Ei(Ei(Ei(a,u),u),u)].map(Ai).map(o);return r.push(s),r.push(s.slice().reverse()),{polygons:r,centers:i}}}n.forEach(((t,n)=>{for(let e=0;e<3;e++){const i=t[e],o=t[(e+1)%3],a=t[(e+2)%3];r[i]=r[i]||[],r[i].push([o,a,n,[i,o,a]])}}));function o(t){let e=-1;return i.slice(n.length,1/0).forEach(((r,i)=>{r[0]===t[0]&&r[1]===t[1]&&(e=i+n.length)})),e<0&&(e=i.length,i.push(t)),e}return{polygons:r.map((t=>{const n=[t[0][2]];let r=t[0][1];for(let e=1;e<t.length;e++)for(let e=0;e<t.length;e++)if(t[e][0]==r){r=t[e][1],n.push(t[e][2]);break}if(n.length>2)return n;if(2==n.length){const r=ji(e[t[0][3][0]],e[t[0][3][1]],i[n[0]]),a=ji(e[t[0][3][2]],e[t[0][3][0]],i[n[0]]),f=o(r),u=o(a);return[n[0],u,n[1],f]}})),centers:i}}(a,e,t),s=function(t){const n=[];return t.forEach((t=>{if(!t)return;let e=t[t.length-1];for(let r of t)r>e&&n.push([e,r]),e=r})),n}(f),c=function(t,n){const e={},r=[];t.map((t=>{if(!(Ti(t.map((t=>n[t>n.length?0:t])))<0))for(let n=0;n<3;n++){let r=[t[n],t[(n+1)%3]],i=`${r[1]}-${r[0]}`;e[i]?delete e[i]:e[r.join("-")]=!0}}));const i={};let o;if(Object.keys(e).forEach((t=>{t=t.split("-").map(Number),i[t[0]]=t[1],o=t[0]})),void 0===o)return r;let a=o;do{r.push(a);let t=i[a];i[a]=-1,a=t}while(a>-1&&a!==o);return r}(e,t),l=function(t,n){return function(e){const r={},i={};return t.forEach(((t,n)=>{const o=t.join("-");r[o]=e[n],i[o]=!0})),n.forEach((t=>{let n=0,e=-1;for(var o=0;o<3;o++){let i=hi([t[o],t[(o+1)%3]]).join("-");r[i]>n&&(n=r[i],e=i)}i[e]=!1})),t.map((t=>i[t.join("-")]))}}(r,e);return{delaunay:n,edges:r,triangles:e,centers:u,neighbors:i,polygons:f,mesh:s,hull:c,urquhart:l,find:o}}function ji(t,n,e){t=Pi(t),n=Pi(n),e=Pi(e);const r=wi(Si(Ei(n,t),e));return Ai(Ni(ki(t,n)).map((t=>r*t)))}function Fi(t){const n=function(t){if(n.delaunay=null,n._data=t,"object"==typeof n._data&&"FeatureCollection"===n._data.type&&(n._data=n._data.features),"object"==typeof n._data){const t=n._data.map((t=>[n._vx(t),n._vy(t),t])).filter((t=>isFinite(t[0]+t[1])));n.points=t.map((t=>[t[0],t[1]])),n.valid=t.map((t=>t[2])),n.delaunay=zi(n.points)}return n};return n._vx=function(t){return"object"==typeof t&&"type"in t?cr(t)[0]:0 in t?t[0]:void 0},n._vy=function(t){return"object"==typeof t&&"type"in t?cr(t)[1]:1 in t?t[1]:void 0},n.x=function(t){return t?(n._vx=t,n):n._vx},n.y=function(t){return t?(n._vy=t,n):n._vy},n.polygons=function(t){if(void 0!==t&&n(t),!n.delaunay)return!1;const e={type:"FeatureCollection",features:[]};return 0===n.valid.length||(n.delaunay.polygons.forEach(((t,r)=>e.features.push({type:"Feature",geometry:t?{type:"Polygon",coordinates:[[...t,t[0]].map((t=>n.delaunay.centers[t]))]}:null,properties:{site:n.valid[r],sitecoordinates:n.points[r],neighbours:n.delaunay.neighbors[r]}}))),1===n.valid.length&&e.features.push({type:"Feature",geometry:{type:"Sphere"},properties:{site:n.valid[0],sitecoordinates:n.points[0],neighbours:[]}})),e},n.triangles=function(t){return void 0!==t&&n(t),!!n.delaunay&&{type:"FeatureCollection",features:n.delaunay.triangles.map(((t,e)=>((t=t.map((t=>n.points[t]))).center=n.delaunay.centers[e],t))).filter((t=>Ti(t)>0)).map((t=>({type:"Feature",properties:{circumcenter:t.center},geometry:{type:"Polygon",coordinates:[[...t,t[0]]]}})))}},n.links=function(t){if(void 0!==t&&n(t),!n.delaunay)return!1;const e=n.delaunay.edges.map((t=>Jr(n.points[t[0]],n.points[t[1]]))),r=n.delaunay.urquhart(e);return{type:"FeatureCollection",features:n.delaunay.edges.map(((t,i)=>({type:"Feature",properties:{source:n.valid[t[0]],target:n.valid[t[1]],length:e[i],urquhart:!!r[i]},geometry:{type:"LineString",coordinates:[n.points[t[0]],n.points[t[1]]]}})))}},n.mesh=function(t){return void 0!==t&&n(t),!!n.delaunay&&{type:"MultiLineString",coordinates:n.delaunay.edges.map((t=>[n.points[t[0]],n.points[t[1]]]))}},n.cellMesh=function(t){if(void 0!==t&&n(t),!n.delaunay)return!1;const{centers:e,polygons:r}=n.delaunay,i=[];for(const t of r)if(t)for(let n=t.length,r=t[n-1],o=t[0],a=0;a<n;r=o,o=t[++a])o>r&&i.push([e[r],e[o]]);return{type:"MultiLineString",coordinates:i}},n._found=void 0,n.find=function(t,e,r){if(n._found=n.delaunay.find(t,e,n._found),!r||Jr([t,e],n.points[n._found])<r)return n._found},n.hull=function(t){void 0!==t&&n(t);const e=n.delaunay.hull,r=n.points;return 0===e.length?null:{type:"Polygon",coordinates:[[...e.map((t=>r[t])),r[e[0]]]]}},t?n(t):n}function Ii(t,n){return t<n?-1:t>n?1:t>=n?0:NaN}!function(t){1===t.length&&(t=function(t){return function(n,e){return Ii(t(n),e)}}(t))}(Ii);var Li="$";function $i(){}function Zi(t,n){var e=new $i;if(t instanceof $i)t.each((function(t,n){e.set(n,t)}));else if(Array.isArray(t)){var r,i=-1,o=t.length;if(null==n)for(;++i<o;)e.set(i,t[i]);else for(;++i<o;)e.set(n(r=t[i],i,t),r)}else if(t)for(var a in t)e.set(a,t[a]);return e}function Oi(){}$i.prototype=Zi.prototype={constructor:$i,has:function(t){return Li+t in this},get:function(t){return this[Li+t]},set:function(t,n){return this[Li+t]=n,this},remove:function(t){var n=Li+t;return n in this&&delete this[n]},clear:function(){for(var t in this)t[0]===Li&&delete this[t]},keys:function(){var t=[];for(var n in this)n[0]===Li&&t.push(n.slice(1));return t},values:function(){var t=[];for(var n in this)n[0]===Li&&t.push(this[n]);return t},entries:function(){var t=[];for(var n in this)n[0]===Li&&t.push({key:n.slice(1),value:this[n]});return t},size:function(){var t=0;for(var n in this)n[0]===Li&&++t;return t},empty:function(){for(var t in this)if(t[0]===Li)return!1;return!0},each:function(t){for(var n in this)n[0]===Li&&t(this[n],n.slice(1),this)}};var qi=Zi.prototype;function Hi(t,n,e){t.prototype=n.prototype=e,e.constructor=t}function Ri(t,n){var e=Object.create(t.prototype);for(var r in n)e[r]=n[r];return e}function Ui(){}Oi.prototype={constructor:Oi,has:qi.has,add:function(t){return this[Li+(t+="")]=t,this},remove:qi.remove,clear:qi.clear,values:qi.keys,size:qi.size,empty:qi.empty,each:qi.each};var Ci=.7,Bi=1/Ci,Ki="\\s*([+-]?\\d+)\\s*",Gi="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",Ji="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Di=/^#([0-9a-f]{3,8})$/,Vi=new RegExp("^rgb\\("+[Ki,Ki,Ki]+"\\)$"),Wi=new RegExp("^rgb\\("+[Ji,Ji,Ji]+"\\)$"),Xi=new RegExp("^rgba\\("+[Ki,Ki,Ki,Gi]+"\\)$"),Yi=new RegExp("^rgba\\("+[Ji,Ji,Ji,Gi]+"\\)$"),Qi=new RegExp("^hsl\\("+[Gi,Ji,Ji]+"\\)$"),to=new RegExp("^hsla\\("+[Gi,Ji,Ji,Gi]+"\\)$"),no={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function eo(){return this.rgb().formatHex()}function ro(){return this.rgb().formatRgb()}function io(t){var n,e;return t=(t+"").trim().toLowerCase(),(n=Di.exec(t))?(e=n[1].length,n=parseInt(n[1],16),6===e?oo(n):3===e?new uo(n>>8&15|n>>4&240,n>>4&15|240&n,(15&n)<<4|15&n,1):8===e?ao(n>>24&255,n>>16&255,n>>8&255,(255&n)/255):4===e?ao(n>>12&15|n>>8&240,n>>8&15|n>>4&240,n>>4&15|240&n,((15&n)<<4|15&n)/255):null):(n=Vi.exec(t))?new uo(n[1],n[2],n[3],1):(n=Wi.exec(t))?new uo(255*n[1]/100,255*n[2]/100,255*n[3]/100,1):(n=Xi.exec(t))?ao(n[1],n[2],n[3],n[4]):(n=Yi.exec(t))?ao(255*n[1]/100,255*n[2]/100,255*n[3]/100,n[4]):(n=Qi.exec(t))?ho(n[1],n[2]/100,n[3]/100,1):(n=to.exec(t))?ho(n[1],n[2]/100,n[3]/100,n[4]):no.hasOwnProperty(t)?oo(no[t]):"transparent"===t?new uo(NaN,NaN,NaN,0):null}function oo(t){return new uo(t>>16&255,t>>8&255,255&t,1)}function ao(t,n,e,r){return r<=0&&(t=n=e=NaN),new uo(t,n,e,r)}function fo(t){return t instanceof Ui||(t=io(t)),t?new uo((t=t.rgb()).r,t.g,t.b,t.opacity):new uo}function uo(t,n,e,r){this.r=+t,this.g=+n,this.b=+e,this.opacity=+r}function so(){return"#"+lo(this.r)+lo(this.g)+lo(this.b)}function co(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}function lo(t){return((t=Math.max(0,Math.min(255,Math.round(t)||0)))<16?"0":"")+t.toString(16)}function ho(t,n,e,r){return r<=0?t=n=e=NaN:e<=0||e>=1?t=n=NaN:n<=0&&(t=NaN),new go(t,n,e,r)}function po(t){if(t instanceof go)return new go(t.h,t.s,t.l,t.opacity);if(t instanceof Ui||(t=io(t)),!t)return new go;if(t instanceof go)return t;var n=(t=t.rgb()).r/255,e=t.g/255,r=t.b/255,i=Math.min(n,e,r),o=Math.max(n,e,r),a=NaN,f=o-i,u=(o+i)/2;return f?(a=n===o?(e-r)/f+6*(e<r):e===o?(r-n)/f+2:(n-e)/f+4,f/=u<.5?o+i:2-o-i,a*=60):f=u>0&&u<1?0:a,new go(a,f,u,t.opacity)}function go(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function yo(t,n,e){return 255*(t<60?n+(e-n)*t/60:t<180?e:t<240?n+(e-n)*(240-t)/60:n)}Hi(Ui,io,{copy:function(t){return Object.assign(new this.constructor,this,t)},displayable:function(){return this.rgb().displayable()},hex:eo,formatHex:eo,formatHsl:function(){return po(this).formatHsl()},formatRgb:ro,toString:ro}),Hi(uo,(function(t,n,e,r){return 1===arguments.length?fo(t):new uo(t,n,e,null==r?1:r)}),Ri(Ui,{brighter:function(t){return t=null==t?Bi:Math.pow(Bi,t),new uo(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?Ci:Math.pow(Ci,t),new uo(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:so,formatHex:so,formatRgb:co,toString:co})),Hi(go,(function(t,n,e,r){return 1===arguments.length?po(t):new go(t,n,e,null==r?1:r)}),Ri(Ui,{brighter:function(t){return t=null==t?Bi:Math.pow(Bi,t),new go(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Ci:Math.pow(Ci,t),new go(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),n=isNaN(t)||isNaN(this.s)?0:this.s,e=this.l,r=e+(e<.5?e:1-e)*n,i=2*e-r;return new uo(yo(t>=240?t-240:t+120,i,r),yo(t,i,r),yo(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl:function(){var t=this.opacity;return(1===(t=isNaN(t)?1:Math.max(0,Math.min(1,t)))?"hsl(":"hsla(")+(this.h||0)+", "+100*(this.s||0)+"%, "+100*(this.l||0)+"%"+(1===t?")":", "+t+")")}}));var bo=Math.PI/180,vo=180/Math.PI,xo=-.14861,mo=1.78277,_o=-.29227,wo=-.90649,Mo=1.97294,So=Mo*wo,Eo=Mo*mo,ko=mo*_o-wo*xo;function No(t){if(t instanceof Po)return new Po(t.h,t.s,t.l,t.opacity);t instanceof uo||(t=fo(t));var n=t.r/255,e=t.g/255,r=t.b/255,i=(ko*r+So*n-Eo*e)/(ko+So-Eo),o=r-i,a=(Mo*(e-i)-_o*o)/wo,f=Math.sqrt(a*a+o*o)/(Mo*i*(1-i)),u=f?Math.atan2(a,o)*vo-120:NaN;return new Po(u<0?u+360:u,f,i,t.opacity)}function Ao(t,n,e,r){return 1===arguments.length?No(t):new Po(t,n,e,null==r?1:r)}function Po(t,n,e,r){this.h=+t,this.s=+n,this.l=+e,this.opacity=+r}function To(t){return function(){return t}}function zo(t,n){return function(e){return t+e*n}}function jo(t,n){var e=n-t;return e?zo(t,e):To(isNaN(t)?n:t)}function Fo(t){return function n(e){function r(n,r){var i=t((n=Ao(n)).h,(r=Ao(r)).h),o=jo(n.s,r.s),a=jo(n.l,r.l),f=jo(n.opacity,r.opacity);return function(t){return n.h=i(t),n.s=o(t),n.l=a(Math.pow(t,e)),n.opacity=f(t),n+""}}return e=+e,r.gamma=n,r}(1)}Hi(Po,Ao,Ri(Ui,{brighter:function(t){return t=null==t?Bi:Math.pow(Bi,t),new Po(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?Ci:Math.pow(Ci,t),new Po(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*bo,n=+this.l,e=isNaN(this.s)?0:this.s*n*(1-n),r=Math.cos(t),i=Math.sin(t);return new uo(255*(n+e*(xo*r+mo*i)),255*(n+e*(_o*r+wo*i)),255*(n+e*(Mo*r)),this.opacity)}})),Fo((function(t,n){var e=n-t;return e?zo(t,e>180||e<-180?e-360*Math.round(e/360):e):To(isNaN(t)?n:t)}));var Io=Fo(jo);function Lo(t){return t.match(/.{6}/g).map((function(t){return"#"+t}))}function $o(t){var n=t.length;return function(e){return t[Math.max(0,Math.min(n-1,Math.floor(e*n)))]}}function Zo(t,n){return t.map((function(t){var e,r=[];return t.forEach((function(t){if(e){var i=180*kn(t,e)/Math.PI;if(i>n)for(var o=function(t,n){var e=t[0]*pt,r=t[1]*pt,i=n[0]*pt,o=n[1]*pt,a=bt(r),f=vt(r),u=bt(o),s=vt(o),c=a*bt(e),l=a*vt(e),h=u*bt(i),d=u*vt(i),p=2*_t(mt(wt(o-r)+a*u*wt(i-e))),g=vt(p),y=p?function(t){var n=vt(t*=p)/g,e=vt(p-t)/g,r=e*c+n*h,i=e*l+n*d,o=e*f+n*s;return[yt(i,r)*dt,yt(o,mt(r*r+i*i))*dt]}:function(){return[e*dt,r*dt]};return y.distance=p,y}(e,t),a=1/Math.ceil(i/n),f=a;f<1;)r.push(o(f)),f+=a}r.push(e=t)})),r}))}function Oo(t,n){var e={type:"Polygon",coordinates:t},r=a(vn(e),2),i=a(r[0],2),o=i[0],f=i[1],u=a(r[1],2),s=u[0],c=u[1];if(Math.min(Math.abs(s-o),Math.abs(c-f))<n)return[];var l=o>s||c>=89||f<=-89;return function(t){for(var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=n.minLng,r=n.maxLng,i=n.minLat,o=n.maxLat,a=Math.round(Math.pow(360/t,2)/Math.PI),f=(1+Math.sqrt(5))/2,u=function(t){return t/f*360%360-180},s=function(t){return Math.acos(2*t/a-1)/Math.PI*180-90},c=function(t){return a*(Math.cos((t+90)*Math.PI/180)+1)/2},l=[void 0!==o?Math.ceil(c(o)):0,void 0!==i?Math.floor(c(i)):a-1],h=void 0===e&&void 0===r?function(){return!0}:void 0===e?function(t){return t<=r}:void 0===r?function(t){return t>=e}:r>=e?function(t){return t>=e&&t<=r}:function(t){return t>=e||t<=r},d=[],p=l[0];p<=l[1];p++){var g=u(p);h(g)&&d.push([g,s(p)])}return d}(n,{minLng:o,maxLng:s,minLat:f,maxLat:c}).filter((function(t){return qo(t,e,l)}))}function qo(t,n){var e=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e?Ln(n,t):at(t,n)}Lo("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),Lo("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),Lo("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),Lo("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5"),Io(Ao(300,.5,0),Ao(-240,.5,1)),Io(Ao(-100,.75,.35),Ao(80,1.5,.8)),Io(Ao(260,.75,.35),Ao(80,1.5,.8)),Ao(),$o(Lo("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725")),$o(Lo("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),$o(Lo("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),$o(Lo("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921"));var Ho=window.THREE?window.THREE:{BufferGeometry:n.BufferGeometry,Float32BufferAttribute:n.Float32BufferAttribute},Ro=(new Ho.BufferGeometry).setAttribute?"setAttribute":"addAttribute",Uo=function(t){!function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(n&&n.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),n&&r(t,n)}(e,t);var n=o(e);function e(t,r,i,o,u,s,c){var d;!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,e),(d=n.call(this)).type="ConicPolygonBufferGeometry",d.parameters={polygonGeoJson:t,startHeight:r,endHeight:i,closedBottom:o,closedTop:u,includeSides:s,curvatureResolution:c},r=r||0,i=i||1,o=void 0===o||o,u=void 0===u||u,s=void 0===s||s;var p=function(t){var n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).resolution,e=void 0===n?1/0:n,r=Zo(t,e),i=h(r),o=Oo(t,e),u=[].concat(f(i),f(o)),s={type:"Polygon",coordinates:t},c=a(vn(s),2),d=a(c[0],2),p=d[0],g=d[1],y=a(c[1],2),b=y[0],v=y[1],x=p>b||v>=89||g<=-89,m=[];if(x){var _=Fi(u).triangles(),w=new Map(u.map((function(t,n){var e=a(t,2),r=e[0],i=e[1];return["".concat(r,"-").concat(i),n]})));_.features.forEach((function(t){var n,e=t.geometry.coordinates[0].slice(0,3).reverse(),r=[];if(e.forEach((function(t){var n=a(t,2),e=n[0],i=n[1],o="".concat(e,"-").concat(i);w.has(o)&&r.push(w.get(o))})),3===r.length){if(r.some((function(t){return t<i.length}))&&!qo(t.properties.circumcenter,s,x))return;(n=m).push.apply(n,r)}}))}else if(o.length)!function(){for(var t=Y.from(u),n=function(n,e){var r,o=[2,1,0].map((function(e){return t.triangles[n+e]})),a=o.map((function(t){return u[t]}));if(o.some((function(t){return t<i.length}))&&!qo([0,1].map((function(t){return l(a,(function(n){return n[t]}))})),s,x))return"continue";(r=m).push.apply(r,f(o))},e=0,r=t.triangles.length;e<r;e+=3)n(e)}();else{var M=H.flatten(r),S=M.vertices,E=M.holes;m=H(S,void 0===E?[]:E,2)}return{contour:r,triangles:{points:u,indices:m}}}(t,{resolution:c=c||5}),g=p.contour,y=p.triangles,b=[],v=[],x=0,m=function(t){var n=Math.round(b.length/3),e=v.length;b=b.concat(t.vertices),v=v.concat(n?t.indices.map((function(t){return t+n})):t.indices),d.addGroup(e,v.length-e,x++)};function _(t,n){var e=t.map((function(t){return t.map((function(t){var e=a(t,2),r=e[0];return function(t,n){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=(90-t)*Math.PI/180,i=(90-n)*Math.PI/180;return[e*Math.sin(r)*Math.cos(i),e*Math.cos(r),e*Math.sin(r)*Math.sin(i)]}(e[1],r,n)}))}));return H.flatten(e)}function w(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return{indices:n?y.indices:y.indices.slice().reverse(),vertices:_([y.points],t).vertices}}return s&&m(function(){for(var t=_(g,r),n=t.vertices,e=t.holes,o=_(g,i).vertices,a=h([o,n]),f=Math.round(o.length/3),u=new Set(e),s=0,c=[],l=0;l<f;l++){var d=l+1;if(d===f)d=s;else if(u.has(d)){var p=d;d=s,s=p}c.push(l,l+f,d+f),c.push(d+f,d,l)}return{indices:c,vertices:a}}()),o&&m(w(r,!1)),u&&m(w(i,!0)),d.setIndex(v),d[Ro]("position",new Ho.Float32BufferAttribute(b,3)),d.computeVertexNormals(),d}return e}(Ho.BufferGeometry);t.ConicPolygonBufferGeometry=Uo,t.ConicPolygonGeometry=Uo,Object.defineProperty(t,"__esModule",{value:!0})}));
